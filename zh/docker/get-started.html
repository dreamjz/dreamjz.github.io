<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker 入门 | 今朝のブログ</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css">
    <script src="https://cdn.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/autoload.js"></script>
    <link rel="shortcut icon" herf="favicon.ico">
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-3RQ3LRSTKM"></script>
    <script>window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());
		  
			gtag('config', 'G-3RQ3LRSTKM');</script>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta name="google-site-verification" content="lHBWOiWCnBWvc1h4REqjllalv9ZpQbXbHDdM8chFuuw">
    
    <link rel="preload" href="/assets/css/0.styles.e8c9bca8.css" as="style"><link rel="preload" href="/assets/js/app.0da5a1b3.js" as="script"><link rel="preload" href="/assets/js/5.94f54d66.js" as="script"><link rel="preload" href="/assets/js/1.7ee7f9d3.js" as="script"><link rel="preload" href="/assets/js/16.a5b0073d.js" as="script"><link rel="prefetch" href="/assets/js/10.e8c434a9.js"><link rel="prefetch" href="/assets/js/11.3f95f62e.js"><link rel="prefetch" href="/assets/js/12.b33964d5.js"><link rel="prefetch" href="/assets/js/13.04db2a80.js"><link rel="prefetch" href="/assets/js/14.51985049.js"><link rel="prefetch" href="/assets/js/15.ef763e73.js"><link rel="prefetch" href="/assets/js/17.cf41bfbe.js"><link rel="prefetch" href="/assets/js/18.cc2043fb.js"><link rel="prefetch" href="/assets/js/19.c81266dc.js"><link rel="prefetch" href="/assets/js/2.1e48f163.js"><link rel="prefetch" href="/assets/js/20.2a38351e.js"><link rel="prefetch" href="/assets/js/21.7447e2fc.js"><link rel="prefetch" href="/assets/js/22.419b3182.js"><link rel="prefetch" href="/assets/js/23.d698e33f.js"><link rel="prefetch" href="/assets/js/24.a7002636.js"><link rel="prefetch" href="/assets/js/25.3b70aac4.js"><link rel="prefetch" href="/assets/js/26.61a9251d.js"><link rel="prefetch" href="/assets/js/27.c600e95f.js"><link rel="prefetch" href="/assets/js/28.429b1199.js"><link rel="prefetch" href="/assets/js/29.e422d107.js"><link rel="prefetch" href="/assets/js/30.9a8f326f.js"><link rel="prefetch" href="/assets/js/31.03485e90.js"><link rel="prefetch" href="/assets/js/32.273050e9.js"><link rel="prefetch" href="/assets/js/33.018f0844.js"><link rel="prefetch" href="/assets/js/34.2745aa77.js"><link rel="prefetch" href="/assets/js/35.97cb4606.js"><link rel="prefetch" href="/assets/js/36.3cec63cc.js"><link rel="prefetch" href="/assets/js/37.8c3aed53.js"><link rel="prefetch" href="/assets/js/38.866e61ea.js"><link rel="prefetch" href="/assets/js/39.366775fd.js"><link rel="prefetch" href="/assets/js/40.ded3990d.js"><link rel="prefetch" href="/assets/js/41.a4a33f90.js"><link rel="prefetch" href="/assets/js/42.af81a4b2.js"><link rel="prefetch" href="/assets/js/43.69284c50.js"><link rel="prefetch" href="/assets/js/6.246a2818.js"><link rel="prefetch" href="/assets/js/7.50146241.js"><link rel="prefetch" href="/assets/js/8.9afac701.js"><link rel="prefetch" href="/assets/js/9.24fd4584.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.1dd0e98e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e8c9bca8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-0f44a727><div data-v-0f44a727><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-0f44a727 data-v-0f44a727><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-355e03f9 data-v-0f44a727 data-v-0f44a727><h3 class="title" data-v-355e03f9 data-v-355e03f9>今朝のブログ</h3> <p class="description" data-v-355e03f9 data-v-355e03f9></p> <label id="box" class="inputBox" data-v-355e03f9 data-v-355e03f9><input type="password" value="" data-v-355e03f9> <span data-v-355e03f9>Konck! Knock!</span> <button data-v-355e03f9>OK</button></label> <div class="footer" data-v-355e03f9 data-v-355e03f9><span data-v-355e03f9><i class="iconfont reco-theme" data-v-355e03f9></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-355e03f9>vuePress-theme-reco</a></span> <span data-v-355e03f9><i class="iconfont reco-copyright" data-v-355e03f9></i> <a data-v-355e03f9><span data-v-355e03f9>今朝</span>
            
          <!---->
          2021
        </a></span></div></div> <div class="hide" data-v-0f44a727><header class="navbar" data-v-0f44a727><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/image/hero.jpg" alt="今朝のブログ" class="logo"> <span class="site-name">今朝のブログ</span></a> <div class="links"><!----> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/zh/index.html" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/golang/one.html" class="nav-link"><i class="undefined"></i>
  Golang
</a></li><li class="dropdown-item"><!----> <a href="/zh/git.html" class="nav-link"><i class="undefined"></i>
  Git
</a></li></ul></div></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="/tags/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tags
</a></div><div class="nav-item"><a href="https://github.com/dreamjz" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-0f44a727></div> <aside class="sidebar" data-v-0f44a727><div class="personal-info-wrapper" data-v-5aaeb100 data-v-0f44a727><img src="/image/hero.jpg" alt="author-avatar" class="personal-img" data-v-5aaeb100> <h3 class="name" data-v-5aaeb100>
    今朝
  </h3> <div class="num" data-v-5aaeb100><div data-v-5aaeb100><h3 data-v-5aaeb100>27</h3> <h6 data-v-5aaeb100>文章</h6></div> <div data-v-5aaeb100><h3 data-v-5aaeb100>8</h3> <h6 data-v-5aaeb100>标签</h6></div></div> <ul class="social-links" data-v-5aaeb100></ul> <hr data-v-5aaeb100></div> <nav class="nav-links"><div class="nav-item"><a href="/zh/index.html" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/zh/golang/one.html" class="nav-link"><i class="undefined"></i>
  Golang
</a></li><li class="dropdown-item"><!----> <a href="/zh/git.html" class="nav-link"><i class="undefined"></i>
  Git
</a></li></ul></div></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="/tags/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tags
</a></div><div class="nav-item"><a href="https://github.com/dreamjz" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav> <ul class="sidebar-links"><li><a href="/zh/" aria-current="page" class="sidebar-link">Welcome</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Golang</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Nginx</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Docker</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zh/docker/get-started.html" aria-current="page" class="active sidebar-link">Docker 入门</a></li><li><a href="/zh/docker/docker-nginx.html" class="sidebar-link">Dokcer 部署 Nginx</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Docker practice</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Raspberry Pi</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Front End</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-355e03f9 data-v-0f44a727><h3 class="title" data-v-355e03f9 data-v-355e03f9>Docker 入门</h3> <!----> <label id="box" class="inputBox" data-v-355e03f9 data-v-355e03f9><input type="password" value="" data-v-355e03f9> <span data-v-355e03f9>Konck! Knock!</span> <button data-v-355e03f9>OK</button></label> <div class="footer" data-v-355e03f9 data-v-355e03f9><span data-v-355e03f9><i class="iconfont reco-theme" data-v-355e03f9></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-355e03f9>vuePress-theme-reco</a></span> <span data-v-355e03f9><i class="iconfont reco-copyright" data-v-355e03f9></i> <a data-v-355e03f9><span data-v-355e03f9>今朝</span>
            
          <!---->
          2021
        </a></span></div></div> <div data-v-0f44a727><div id="particles-js" color="#dedede" particleOpacity="0.7" linesColor="#dedede" particlesNumber="80" shapeType="circle" particleSize="4" linesWidth="1" lineLinked="true" lineOpacity="0.4" linesDistance="150" moveSpeed="3" hoverEffect="true" hoverMode="grab" clickEffect="true" clickMode="push" class="bg-particles"></div> <main class="page"><section><div class="page-title"><h1 class="title">Docker 入门</h1> <div data-v-ff1aa866><i class="iconfont reco-account" data-v-ff1aa866><span data-v-ff1aa866>今朝</span></i> <i class="iconfont reco-date" data-v-ff1aa866><span data-v-ff1aa866>2021/10/31</span></i> <!----> <!----></div></div> <div class="theme-reco-content content__default"><p>Docker是一个开源的应用容器引擎，容器是一个虚拟化的独立环境，开发者可以部署应用到一个可移植的容器中，然后发布到任何流行的linux机器上，也可以实现虚拟化</p> <p>Docker 从 <code>1.13</code> 版本之后采用时间线的方式作为版本号，分为社区版 <code>CE</code> 和企业版 <code>EE</code>，社区版是免费提供给个人开发者和小型团体使用的，企业版会提供额外的收费服务，比如经过官方测试认证过的基础设施、容器、插件等</p> <p>社区版按照 <code>stable</code> 和 <code>edge</code> 两种方式发布，每个季度更新 <code>stable</code> 版本，如 <code>17.06</code>，<code>17.09</code>；每个月份更新 <code>edge</code> 版本，如<code>17.09</code>，<code>17.10</code></p> <h2 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h2> <p>本文操作环境为<code>Manjaro</code>,使用<code>pacman</code>进行安装：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>sudo pacman -S docker
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>查看版本:</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker version
Client:
 Version:           <span class="token number">20.10</span>.9
 API version:       <span class="token number">1.41</span>
 Go version:        go1.17.1
 Git commit:        c2ea9bc90b
 Built:             Mon Oct  <span class="token number">4</span> <span class="token number">19</span>:13:02 <span class="token number">2021</span>
 OS/Arch:           linux/amd64
 Context:           default
 Experimental:      <span class="token boolean">true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>启动服务：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>sudo systemctl start docker.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>或设置开机启动：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>sudo systemctl enable docker.service
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>运行<code>hello-world</code>镜像，验证安装是否成功</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>$ <span class="token function">sudo</span> docker run hello-world    
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>注意默认<code>docker</code>指令需要<code>root</code>用户权限，可以将当前用户加入<code>docker group</code></p> <p>查看当前用户群组：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>$ <span class="token function">cat</span> /etc/group<span class="token operator">|</span><span class="token function">grep</span> docker 
docker:x:961:
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>若<code>docker</code>不存在则创建：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>$ <span class="token function">sudo</span> <span class="token function">groupadd</span> docker
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>将当前用户加入<code>docker</code>群组</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>$ <span class="token function">sudo</span> <span class="token function">usermod</span> -aG docker <span class="token environment constant">$USER</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>以新的组登录</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>$ newgrp docker
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>测试<code>hello-world</code></p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>$ docker run hello-world
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="命令"><a href="#命令" class="header-anchor">#</a> 命令</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ docker --help

管理命令:
  container   管理容器
  image       管理镜像
  network     管理网络
命令：
  attach      介入到一个正在运行的容器
  build       根据 Dockerfile 构建一个镜像
  commit      根据容器的更改创建一个新的镜像
  cp          在本地文件系统与容器中复制 文件/文件夹
  create      创建一个新容器
  exec        在容器中执行一条命令
  images      列出镜像
  kill        杀死一个或多个正在运行的容器    
  logs        取得容器的日志
  pause       暂停一个或多个容器的所有进程
  ps          列出所有容器
  pull        拉取一个镜像或仓库到 registry
  push        推送一个镜像或仓库到 registry
  rename      重命名一个容器
  restart     重新启动一个或多个容器
  rm          删除一个或多个容器
  rmi         删除一个或多个镜像
  run         在一个新的容器中执行一条命令
  search      在 Docker Hub 中搜索镜像
  start       启动一个或多个已经停止运行的容器
  stats       显示一个容器的实时资源占用
  stop        停止一个或多个正在运行的容器
  tag         为镜像创建一个新的标签
  top         显示一个容器内的所有进程
  unpause     恢复一个或多个容器内所有被暂停的进程
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h2 id="容器使用"><a href="#容器使用" class="header-anchor">#</a> 容器使用</h2> <h3 id="启动容器"><a href="#启动容器" class="header-anchor">#</a> 启动容器</h3> <p>使用<code>docker pull</code>获取<code>centos</code>镜像：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker pull centos:latest
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>查看镜像：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>$ docker images                                       
REPOSITORY    TAG       IMAGE ID       CREATED       SIZE
hello-world   latest    feb5d9fea6a5   <span class="token number">5</span> weeks ago   <span class="token number">13</span>.3kB
centos        latest    5d0da3dc9764   <span class="token number">6</span> weeks ago   231MB
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>使用<code>centos</code>镜像启动容器：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker run -it centos /bin/bash
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><code>i</code>:交互式操作</li> <li><code>t</code>:终端</li> <li><code>centos</code>:镜像名</li> <li><code>/bin/bash</code>:命令，启动bash</li></ul> <p>执行<code>exit</code>可以退出容器，此时容器会停止</p> <p>查看所有容器,<code>docker ps</code>查看正在运行的容器：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker <span class="token function">ps</span> -a 
CONTAINER ID   IMAGE         COMMAND       CREATED          STATUS                      PORTS     NAMES
da34e8514a0e   centos        <span class="token string">&quot;/bin/bash&quot;</span>   <span class="token number">14</span> minutes ago   Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">1</span> second ago               admiring_buck
d03b9c3fa042   hello-world   <span class="token string">&quot;/hello&quot;</span>      <span class="token number">19</span> minutes ago   Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">19</span> minutes ago             magical_panini
105c030cdc8c   hello-world   <span class="token string">&quot;/hello&quot;</span>      <span class="token number">41</span> minutes ago   Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">41</span> minutes ago             eager_haslett
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>启动，停止，重启已停止的容器：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>$ docker start CONTAINER_ID
CONTAINER_ID
$ docker stop CONTAINER_ID
CONTAINER_ID
$ docker restart CONTAINER_ID
CONTAINER_ID
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>删除容器：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>$ docker <span class="token function">rm</span> -f CONTAINER_ID
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="后台启动容器-daemon"><a href="#后台启动容器-daemon" class="header-anchor">#</a> 后台启动容器（daemon）</h3> <p>启动容器时使用<code>-d</code>,可以将容器作为守护进程（daemon）在后台运行，需要使用<code>attach</code>或<code>exec</code>指令进入容器</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker run -itd centos /bin/bash
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="docker-attach"><a href="#docker-attach" class="header-anchor">#</a> <code>docker attach</code></h4> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>$ docker attach CONTAINER_ID
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>注意在退出容器后，容器将会停止</p> <h4 id="docker-exec"><a href="#docker-exec" class="header-anchor">#</a> <code>docker exec</code></h4> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>$ docker <span class="token builtin class-name">exec</span> -it CONTAINER_ID COMMAND 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="导入和导出容器"><a href="#导入和导出容器" class="header-anchor">#</a> 导入和导出容器</h3> <p>使用<code>docker export</code>可将容器导出到本地快照</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>$ docker <span class="token builtin class-name">export</span> cb50e17da895 <span class="token operator">&gt;</span> ./centos.tar  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>导入容器快照作为镜像：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>$ <span class="token function">cat</span> centos.tar<span class="token operator">|</span>docker <span class="token function">import</span> - test/centos:local
 sha256:b4e46ee456b5b7ecb4cf35bb3b3c3d5c09230020a87c5f18f71a9004cadf2668
$ docker images
REPOSITORY    TAG       IMAGE ID       CREATED         SIZE
test/centos   <span class="token builtin class-name">local</span>     b4e46ee456b5   <span class="token number">6</span> seconds ago   231MB
hello-world   latest    feb5d9fea6a5   <span class="token number">5</span> weeks ago     <span class="token number">13</span>.3kB
centos        latest    5d0da3dc9764   <span class="token number">6</span> weeks ago     231MB
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="镜像使用"><a href="#镜像使用" class="header-anchor">#</a> 镜像使用</h2> <h3 id="设置镜像加速"><a href="#设置镜像加速" class="header-anchor">#</a> 设置镜像加速</h3> <p>此处使用网易云镜像服务：<code>https://hub-mirror.c.163.com</code></p> <p>请首先执行以下命令，查看是否在 <code>docker.service</code> 文件中配置过镜像地址</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ systemctl cat docker | grep '\-\-registry\-mirror'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>如果该命令有输出，那么请执行 <code>$ systemctl cat docker</code> 查看 <code>ExecStart=</code> 出现的位置，修改对应的文件内容去掉 <code>--registry-mirror</code> 参数及其值，并按接下来的步骤进行配置。</p> <p>如果以上命令没有任何输出，那么就可以在 <code>/etc/docker/daemon.json</code> 中写入如下内容（如果文件不存在请新建该文件）：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;registry-mirrors&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;https://hub-mirror.c.163.com&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;https://mirror.baidubce.com&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>注意，一定要保证该文件符合 json 规范，否则 Docker 将不能启动</p></blockquote> <p>之后重新启动服务:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>$ sudo systemctl daemon-reload
$ sudo systemctl restart docker
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="查看镜像"><a href="#查看镜像" class="header-anchor">#</a> 查看镜像</h3> <p>使用<code>docker images</code>可以查看本地主机的镜像，信息说明：</p> <ul><li>REPOSITORY ： 镜像的仓库</li> <li>TAG： 镜像标签</li> <li>CREATED： 镜像创建时间</li> <li>SIZE：镜像大小</li></ul> <p>同一仓库的镜像有不同的tag，可以使用<code>repository:tag</code>来指定某一镜像</p> <p>获取镜像时，不指定tag，则默认为<code>latest</code></p> <h3 id="搜索镜像"><a href="#搜索镜像" class="header-anchor">#</a> 搜索镜像</h3> <p>可以在<a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer">Dokcer Hub<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>查找镜像，也可以使用<code>docker search</code>:</p> <p>搜索<code>centos</code>:</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token variable">$docker</span> search centos                                                                       <span class="token number">23</span>:48:33 
NAME                              DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED
centos                            The official build of CentOS.                   <span class="token number">6833</span>      <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>       
ansible/centos7-ansible           Ansible on Centos7                              <span class="token number">135</span>                  <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>
consol/centos-xfce-vnc            Centos container with <span class="token string">&quot;headless&quot;</span> VNC session…   <span class="token number">132</span>                  <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>
jdeathe/centos-ssh                OpenSSH / Supervisor / EPEL/IUS/SCL Repos - …   <span class="token number">121</span>                  <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>
centos/systemd                    systemd enabled base container.                 <span class="token number">105</span>                  <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>使用<code>docker pull</code>下载镜像，<code>docker rmi</code>移除镜像：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>$ docker pull centos:5.11
<span class="token punctuation">..</span>.
$ docker rmi centos:5.11
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="创建镜像"><a href="#创建镜像" class="header-anchor">#</a> 创建镜像</h3> <p>当从docker镜像仓库下载的镜像不能满足时，有两种方式创建自定义的镜像：</p> <ul><li>从已有的仓库中提交镜像</li> <li>使用Docker File创建镜像</li></ul> <h4 id="使用docker-commit提交镜像"><a href="#使用docker-commit提交镜像" class="header-anchor">#</a> 使用docker commit提交镜像</h4> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>$ docker commit -m <span class="token string">&quot;a new image&quot;</span> -a <span class="token string">&quot;me&quot;</span> cb50e17da895 dreamjz/centos:local
sha256:7a7a770a75a350729b9c84e512c97515e10e3075266eca8e2294b83321bd6c26
$ docker images
REPOSITORY       TAG       IMAGE ID       CREATED         SIZE
dreamjz/centos   <span class="token builtin class-name">local</span>     7a7a770a75a3   <span class="token number">5</span> seconds ago   231MB
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><code>-m</code>：提交的描述信息</li> <li><code>-a</code>: 指定镜像作者</li> <li><code>cb50e17da895</code>: 容器ID</li> <li><code>dreamjz/centos:local</code>: 目标镜像名</li></ul> <h4 id="使用dokerfile构建镜像"><a href="#使用dokerfile构建镜像" class="header-anchor">#</a> 使用Dokerfile构建镜像</h4> <p>DockerFile是一个用来构建镜像的文本文件，内容包含了一条条构建镜像所需的指令和说明</p> <p>下面以定制一个nginx镜像为例</p> <p>创建一个空目录<code>\$HOME/tmp/</code>,创建<code>Dockerfile</code>:</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>$ <span class="token function">mkdir</span> ~/tmp
$ <span class="token builtin class-name">cd</span> tmp
$ <span class="token function">touch</span> Dockerfile
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>写入内容：</p> <div class="language-dockerfile line-numbers-mode"><pre class="language-dockerfile"><code><span class="token instruction"><span class="token keyword">FROM</span> nginx</span>
<span class="token instruction"><span class="token keyword">RUN</span> echo <span class="token string">'Local nginx imamge'</span> &gt; /usr/share/nginx/html/index.html</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><code>FROM</code>:指定基础镜像，这里基于nginx镜像</li> <li><code>RUN</code>:执行命令</li></ul> <p>使用<code>docker build</code>构建镜像：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker build -t nginx:local <span class="token builtin class-name">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><code>-t</code>:指定镜像名</li> <li><code>.</code>:表示以当前构建打包路径</li></ul> <p>查看镜像：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>docker images
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="参考"><a href="#参考" class="header-anchor">#</a> 参考</h2> <ol><li><a href="https://github.com/jaywcjlove/docker-tutorial" target="_blank" rel="noopener noreferrer">Docker 入门教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> github repo</li> <li><a href="https://stackoverflow.com/questions/48957195/how-to-fix-docker-got-permission-denied-issue" target="_blank" rel="noopener noreferrer">How to fix docker: Got permission denied issue<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> stackoverflow</li> <li><a href="http://www.runoob.com/docker/docker-tutorial.html" target="_blank" rel="noopener noreferrer">Docker 教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 教程</li></ol></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2021/11/8 上午10:25:57</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/zh/nginx/nginx.html" class="prev">
            Nginx 极简教程
          </a></span> <span class="next"><a href="/zh/docker/docker-nginx.html">
            Dokcer 部署 Nginx
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-898d6c54><li class="level-2" data-v-898d6c54><a href="/zh/docker/get-started.html#安装" class="sidebar-link reco-side-安装" data-v-898d6c54>安装</a></li><li class="level-2" data-v-898d6c54><a href="/zh/docker/get-started.html#命令" class="sidebar-link reco-side-命令" data-v-898d6c54>命令</a></li><li class="level-2" data-v-898d6c54><a href="/zh/docker/get-started.html#容器使用" class="sidebar-link reco-side-容器使用" data-v-898d6c54>容器使用</a></li><li class="level-3" data-v-898d6c54><a href="/zh/docker/get-started.html#启动容器" class="sidebar-link reco-side-启动容器" data-v-898d6c54>启动容器</a></li><li class="level-3" data-v-898d6c54><a href="/zh/docker/get-started.html#后台启动容器-daemon" class="sidebar-link reco-side-后台启动容器-daemon" data-v-898d6c54>后台启动容器（daemon）</a></li><li class="level-3" data-v-898d6c54><a href="/zh/docker/get-started.html#导入和导出容器" class="sidebar-link reco-side-导入和导出容器" data-v-898d6c54>导入和导出容器</a></li><li class="level-2" data-v-898d6c54><a href="/zh/docker/get-started.html#镜像使用" class="sidebar-link reco-side-镜像使用" data-v-898d6c54>镜像使用</a></li><li class="level-3" data-v-898d6c54><a href="/zh/docker/get-started.html#设置镜像加速" class="sidebar-link reco-side-设置镜像加速" data-v-898d6c54>设置镜像加速</a></li><li class="level-3" data-v-898d6c54><a href="/zh/docker/get-started.html#查看镜像" class="sidebar-link reco-side-查看镜像" data-v-898d6c54>查看镜像</a></li><li class="level-3" data-v-898d6c54><a href="/zh/docker/get-started.html#搜索镜像" class="sidebar-link reco-side-搜索镜像" data-v-898d6c54>搜索镜像</a></li><li class="level-3" data-v-898d6c54><a href="/zh/docker/get-started.html#创建镜像" class="sidebar-link reco-side-创建镜像" data-v-898d6c54>创建镜像</a></li><li class="level-2" data-v-898d6c54><a href="/zh/docker/get-started.html#参考" class="sidebar-link reco-side-参考" data-v-898d6c54>参考</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><canvas id="vuepress-canvas-cursor"></canvas><div></div><div id="goTop" class="hide-cat" data-v-bf92849a></div><canvas id="vuepress-canvas-ribbon"></canvas></div></div>
    <script src="/assets/js/app.0da5a1b3.js" defer></script><script src="/assets/js/5.94f54d66.js" defer></script><script src="/assets/js/1.7ee7f9d3.js" defer></script><script src="/assets/js/16.a5b0073d.js" defer></script>
  </body>
</html>
