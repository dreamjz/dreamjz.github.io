<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Introduction to gRPC | 今朝のブログ</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css">
    <script src="https://cdn.jsdelivr.net/gh/stevenjoezhang/live2d-widget@latest/autoload.js"></script>
    <link rel="shortcut icon" herf="favicon.ico">
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-3RQ3LRSTKM"></script>
    <script>window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());
		  
			gtag('config', 'G-3RQ3LRSTKM');</script>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta name="google-site-verification" content="lHBWOiWCnBWvc1h4REqjllalv9ZpQbXbHDdM8chFuuw">
    
    <link rel="preload" href="/assets/css/0.styles.6a6b0998.css" as="style"><link rel="preload" href="/assets/js/app.a394ef45.js" as="script"><link rel="preload" href="/assets/js/6.5e9ba2d7.js" as="script"><link rel="preload" href="/assets/js/1.3bdf79e4.js" as="script"><link rel="preload" href="/assets/js/121.db4821de.js" as="script"><link rel="prefetch" href="/assets/js/10.2a2190a2.js"><link rel="prefetch" href="/assets/js/100.76e49a15.js"><link rel="prefetch" href="/assets/js/101.bb80df34.js"><link rel="prefetch" href="/assets/js/102.1e2c6ab4.js"><link rel="prefetch" href="/assets/js/103.2c9a24f6.js"><link rel="prefetch" href="/assets/js/104.78fa10c3.js"><link rel="prefetch" href="/assets/js/105.7759ca74.js"><link rel="prefetch" href="/assets/js/106.13a8bb4b.js"><link rel="prefetch" href="/assets/js/107.9e03cc30.js"><link rel="prefetch" href="/assets/js/108.f9d332cf.js"><link rel="prefetch" href="/assets/js/109.e1898c75.js"><link rel="prefetch" href="/assets/js/11.2a5698d4.js"><link rel="prefetch" href="/assets/js/110.c8c6b7fc.js"><link rel="prefetch" href="/assets/js/111.d32ac746.js"><link rel="prefetch" href="/assets/js/112.e930bec5.js"><link rel="prefetch" href="/assets/js/113.941c15c7.js"><link rel="prefetch" href="/assets/js/114.30f042cd.js"><link rel="prefetch" href="/assets/js/115.926ed29a.js"><link rel="prefetch" href="/assets/js/116.f52770f8.js"><link rel="prefetch" href="/assets/js/117.04ab2ef1.js"><link rel="prefetch" href="/assets/js/118.004872f6.js"><link rel="prefetch" href="/assets/js/119.ba2fa5c5.js"><link rel="prefetch" href="/assets/js/12.fce9e81e.js"><link rel="prefetch" href="/assets/js/120.43cd7690.js"><link rel="prefetch" href="/assets/js/122.1171a1f9.js"><link rel="prefetch" href="/assets/js/123.f23f3bc5.js"><link rel="prefetch" href="/assets/js/124.4a0479eb.js"><link rel="prefetch" href="/assets/js/125.a1fd755e.js"><link rel="prefetch" href="/assets/js/126.11627dcf.js"><link rel="prefetch" href="/assets/js/127.dc87003c.js"><link rel="prefetch" href="/assets/js/128.bfbeeffc.js"><link rel="prefetch" href="/assets/js/129.1a53196e.js"><link rel="prefetch" href="/assets/js/13.8c195441.js"><link rel="prefetch" href="/assets/js/130.73e82293.js"><link rel="prefetch" href="/assets/js/14.e578a815.js"><link rel="prefetch" href="/assets/js/15.9b25eeea.js"><link rel="prefetch" href="/assets/js/16.9c83bcf7.js"><link rel="prefetch" href="/assets/js/17.4ecbd1af.js"><link rel="prefetch" href="/assets/js/18.38190dde.js"><link rel="prefetch" href="/assets/js/19.1cc66f2e.js"><link rel="prefetch" href="/assets/js/2.f099030c.js"><link rel="prefetch" href="/assets/js/20.42dfd197.js"><link rel="prefetch" href="/assets/js/21.bb9d9c17.js"><link rel="prefetch" href="/assets/js/22.8ac0cafd.js"><link rel="prefetch" href="/assets/js/23.af550181.js"><link rel="prefetch" href="/assets/js/24.90cb3107.js"><link rel="prefetch" href="/assets/js/25.0a72d440.js"><link rel="prefetch" href="/assets/js/26.2e28937c.js"><link rel="prefetch" href="/assets/js/27.e3e520a3.js"><link rel="prefetch" href="/assets/js/28.c31abde8.js"><link rel="prefetch" href="/assets/js/29.dc215f3b.js"><link rel="prefetch" href="/assets/js/30.6afc117c.js"><link rel="prefetch" href="/assets/js/31.f78599d6.js"><link rel="prefetch" href="/assets/js/32.43a5a5a9.js"><link rel="prefetch" href="/assets/js/33.f50691a4.js"><link rel="prefetch" href="/assets/js/34.557c5c5e.js"><link rel="prefetch" href="/assets/js/35.88462720.js"><link rel="prefetch" href="/assets/js/36.cdf7f701.js"><link rel="prefetch" href="/assets/js/37.ed981022.js"><link rel="prefetch" href="/assets/js/38.c72d76b6.js"><link rel="prefetch" href="/assets/js/39.8111ec1c.js"><link rel="prefetch" href="/assets/js/40.67be7b4b.js"><link rel="prefetch" href="/assets/js/41.cc025150.js"><link rel="prefetch" href="/assets/js/42.4e311271.js"><link rel="prefetch" href="/assets/js/43.278cb9e1.js"><link rel="prefetch" href="/assets/js/44.c73c64af.js"><link rel="prefetch" href="/assets/js/45.8b598f51.js"><link rel="prefetch" href="/assets/js/46.374511f3.js"><link rel="prefetch" href="/assets/js/47.6cd7462d.js"><link rel="prefetch" href="/assets/js/48.e8decfca.js"><link rel="prefetch" href="/assets/js/49.8d3c0864.js"><link rel="prefetch" href="/assets/js/5.e14e72c8.js"><link rel="prefetch" href="/assets/js/50.346c2fc2.js"><link rel="prefetch" href="/assets/js/51.d2e83241.js"><link rel="prefetch" href="/assets/js/52.80262f33.js"><link rel="prefetch" href="/assets/js/53.9962ee30.js"><link rel="prefetch" href="/assets/js/54.f079500f.js"><link rel="prefetch" href="/assets/js/55.21b101da.js"><link rel="prefetch" href="/assets/js/56.d2708527.js"><link rel="prefetch" href="/assets/js/57.8ccab33f.js"><link rel="prefetch" href="/assets/js/58.1091f766.js"><link rel="prefetch" href="/assets/js/59.7e19c283.js"><link rel="prefetch" href="/assets/js/60.eb1deb36.js"><link rel="prefetch" href="/assets/js/61.75a6194a.js"><link rel="prefetch" href="/assets/js/62.be68573e.js"><link rel="prefetch" href="/assets/js/63.bff3bffb.js"><link rel="prefetch" href="/assets/js/64.262adb8f.js"><link rel="prefetch" href="/assets/js/65.61984151.js"><link rel="prefetch" href="/assets/js/66.949601ac.js"><link rel="prefetch" href="/assets/js/67.6901aa36.js"><link rel="prefetch" href="/assets/js/68.82780c62.js"><link rel="prefetch" href="/assets/js/69.84f1c675.js"><link rel="prefetch" href="/assets/js/7.0cb9a5e1.js"><link rel="prefetch" href="/assets/js/70.2931b3b6.js"><link rel="prefetch" href="/assets/js/71.4d1b2098.js"><link rel="prefetch" href="/assets/js/72.b9729940.js"><link rel="prefetch" href="/assets/js/73.d43d7bee.js"><link rel="prefetch" href="/assets/js/74.410a7162.js"><link rel="prefetch" href="/assets/js/75.51a3da61.js"><link rel="prefetch" href="/assets/js/76.ec3beb95.js"><link rel="prefetch" href="/assets/js/77.50928739.js"><link rel="prefetch" href="/assets/js/78.8877a801.js"><link rel="prefetch" href="/assets/js/79.ced10f14.js"><link rel="prefetch" href="/assets/js/8.fe6eb699.js"><link rel="prefetch" href="/assets/js/80.c324ed89.js"><link rel="prefetch" href="/assets/js/81.34b26bf0.js"><link rel="prefetch" href="/assets/js/82.7cf07293.js"><link rel="prefetch" href="/assets/js/83.ccab0fa4.js"><link rel="prefetch" href="/assets/js/84.aab7c649.js"><link rel="prefetch" href="/assets/js/85.c537a8b7.js"><link rel="prefetch" href="/assets/js/86.01ffcf1d.js"><link rel="prefetch" href="/assets/js/87.d506fa8d.js"><link rel="prefetch" href="/assets/js/88.8217f4e7.js"><link rel="prefetch" href="/assets/js/89.c6a6cc6c.js"><link rel="prefetch" href="/assets/js/9.d45c7d5a.js"><link rel="prefetch" href="/assets/js/90.d8df6c16.js"><link rel="prefetch" href="/assets/js/91.78e9d75e.js"><link rel="prefetch" href="/assets/js/92.96d8b2e8.js"><link rel="prefetch" href="/assets/js/93.ae739ea9.js"><link rel="prefetch" href="/assets/js/94.676f1b07.js"><link rel="prefetch" href="/assets/js/95.df623cd3.js"><link rel="prefetch" href="/assets/js/96.9a85ac20.js"><link rel="prefetch" href="/assets/js/97.2a658551.js"><link rel="prefetch" href="/assets/js/98.6fdb9901.js"><link rel="prefetch" href="/assets/js/99.9d502378.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.027d5845.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6a6b0998.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-0f44a727><div data-v-0f44a727><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-0f44a727 data-v-0f44a727><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-355e03f9 data-v-0f44a727 data-v-0f44a727><h3 class="title" data-v-355e03f9 data-v-355e03f9>今朝のブログ</h3> <p class="description" data-v-355e03f9 data-v-355e03f9></p> <label id="box" class="inputBox" data-v-355e03f9 data-v-355e03f9><input type="password" value="" data-v-355e03f9> <span data-v-355e03f9>Konck! Knock!</span> <button data-v-355e03f9>OK</button></label> <div class="footer" data-v-355e03f9 data-v-355e03f9><span data-v-355e03f9><i class="iconfont reco-theme" data-v-355e03f9></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-355e03f9>vuePress-theme-reco</a></span> <span data-v-355e03f9><i class="iconfont reco-copyright" data-v-355e03f9></i> <a data-v-355e03f9><span data-v-355e03f9>今朝</span>
            
          <!---->
          2022
        </a></span></div></div> <div class="hide" data-v-0f44a727><header class="navbar" data-v-0f44a727><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/image/hero.jpg" alt="今朝のブログ" class="logo"> <span class="site-name">今朝のブログ</span></a> <div class="links"><!----> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/zh/index.html" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><a href="/reading-note/index.html" class="nav-link"><i class="iconfont reco-document"></i>
  Reading Note
</a></div><div class="nav-item"><a href="/lang/index.html" class="nav-link"><i class="iconfont reco-message"></i>
  Language
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="/categories/golang/" class="nav-link"><i class="iconfont reco-category"></i>
  Category
</a></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tags
</a></div><div class="nav-item"><a href="/zh/about-me/" class="nav-link"><i class="iconfont reco-account"></i>
  About
</a></div><div class="nav-item"><a href="https://github.com/dreamjz" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-0f44a727></div> <aside class="sidebar" data-v-0f44a727><div class="personal-info-wrapper" data-v-5aaeb100 data-v-0f44a727><img src="/image/hero.jpg" alt="author-avatar" class="personal-img" data-v-5aaeb100> <h3 class="name" data-v-5aaeb100>
    今朝
  </h3> <div class="num" data-v-5aaeb100><div data-v-5aaeb100><h3 data-v-5aaeb100>92</h3> <h6 data-v-5aaeb100>文章</h6></div> <div data-v-5aaeb100><h3 data-v-5aaeb100>26</h3> <h6 data-v-5aaeb100>标签</h6></div></div> <ul class="social-links" data-v-5aaeb100></ul> <hr data-v-5aaeb100></div> <nav class="nav-links"><div class="nav-item"><a href="/zh/index.html" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><a href="/reading-note/index.html" class="nav-link"><i class="iconfont reco-document"></i>
  Reading Note
</a></div><div class="nav-item"><a href="/lang/index.html" class="nav-link"><i class="iconfont reco-message"></i>
  Language
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="/categories/golang/" class="nav-link"><i class="iconfont reco-category"></i>
  Category
</a></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tags
</a></div><div class="nav-item"><a href="/zh/about-me/" class="nav-link"><i class="iconfont reco-account"></i>
  About
</a></div><div class="nav-item"><a href="https://github.com/dreamjz" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav> <ul class="sidebar-links"><li><a href="/zh/" aria-current="page" class="sidebar-link">Welcome</a></li><li><a href="/zh/indexes.html" class="sidebar-link">Index</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Golang</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Leet Code</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>RPC</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Protocol Buffers</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>gRPC</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/zh/rpc/gRPC/preface.html" class="sidebar-link">Preface</a></li><li><a href="/zh/rpc/gRPC/introduction.html" aria-current="page" class="active sidebar-link">Introduction to gRPC</a></li><li><a href="/zh/rpc/gRPC/quick_start.html" class="sidebar-link">Quick Start</a></li><li><a href="/zh/rpc/gRPC/basic_tutorial.html" class="sidebar-link">Basics tutorial</a></li><li><a href="/zh/rpc/gRPC/atls.html" class="sidebar-link">ATLS</a></li><li><a href="/zh/rpc/gRPC/generated_code.html" class="sidebar-link">Generated code</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Linux</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Nginx</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Docker</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Raspberry Pi</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Front End</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Learning Method</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-355e03f9 data-v-0f44a727><h3 class="title" data-v-355e03f9 data-v-355e03f9>Introduction to gRPC</h3> <!----> <label id="box" class="inputBox" data-v-355e03f9 data-v-355e03f9><input type="password" value="" data-v-355e03f9> <span data-v-355e03f9>Konck! Knock!</span> <button data-v-355e03f9>OK</button></label> <div class="footer" data-v-355e03f9 data-v-355e03f9><span data-v-355e03f9><i class="iconfont reco-theme" data-v-355e03f9></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-355e03f9>vuePress-theme-reco</a></span> <span data-v-355e03f9><i class="iconfont reco-copyright" data-v-355e03f9></i> <a data-v-355e03f9><span data-v-355e03f9>今朝</span>
            
          <!---->
          2022
        </a></span></div></div> <div data-v-0f44a727><div id="particles-js" color="#dedede" particleOpacity="0.7" linesColor="#dedede" particlesNumber="80" shapeType="circle" particleSize="4" linesWidth="1" lineLinked="true" lineOpacity="0.4" linesDistance="150" moveSpeed="3" hoverEffect="true" hoverMode="grab" clickEffect="true" clickMode="push" class="bg-particles"></div> <main class="page"><section><div class="page-title"><h1 class="title">Introduction to gRPC</h1> <div data-v-ff1aa866><i class="iconfont reco-account" data-v-ff1aa866><span data-v-ff1aa866>今朝</span></i> <i class="iconfont reco-date" data-v-ff1aa866><span data-v-ff1aa866>2021/12/29</span></i> <!----> <i class="tags iconfont reco-tag" data-v-ff1aa866><span class="tag-item" data-v-ff1aa866>grpc</span></i></div></div> <div class="theme-reco-content content__default"><p>gRPC can use protocol buffers as both its <em>Interface Definition Language</em> (<strong>IDL</strong>) and as its underlying message interchange format.</p> <h2 id="_1-overview"><a href="#_1-overview" class="header-anchor">#</a> 1. Overview</h2> <p>In gRPC, a client application can directly call a method on a server application on a different machine as if it were a local object, making it easier for you to create distributed applications and services. As in many RPC systems, gRPC is based around the idea of defining a service, specifying the methods that can be called remotely with their parameters and return types. On the server side, the server implements this interface and runs a gRPC server to handle client calls. On the client side, the client has a stub (referred to as just a client in some languages) that provides the same methods as the server.</p> <p><img src="/image/rpc/landing-2.svg" alt="Concept Diagram"></p> <p>gRPC clients and servers can run and talk to each other in a variety of environments - from servers inside Google to your own desktop - and can be written in any of gRPC’s supported languages. So, for example, you can easily create a gRPC server in Java with clients in Go, Python, or Ruby.</p> <h2 id="_2-working-with-protocol-buffers"><a href="#_2-working-with-protocol-buffers" class="header-anchor">#</a> 2. Working with Protocol Buffers</h2> <p>By default, gRPC uses Protocol Buffers, Google’s mature open source mechanism for serializing structured data (although it can be used with other data formats such as JSON).</p> <p>You define gRPC services in ordinary proto files, with RPC method parameters and return types specified as protocol buffer messages:</p> <div class="language-protobuf line-numbers-mode"><pre class="language-protobuf"><code><span class="token comment">// The greeter service definition.</span>
<span class="token keyword">service</span> <span class="token class-name">Greeter</span> <span class="token punctuation">{</span>
  <span class="token comment">// Sends a greeting</span>
  <span class="token keyword">rpc</span> <span class="token function">SayHello</span> <span class="token punctuation">(</span><span class="token class-name">HelloRequest</span><span class="token punctuation">)</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token class-name">HelloReply</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// The request message containing the user's name.</span>
<span class="token keyword">message</span> <span class="token class-name">HelloRequest</span> <span class="token punctuation">{</span>
  <span class="token builtin">string</span> name <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// The response message containing the greetings</span>
<span class="token keyword">message</span> <span class="token class-name">HelloReply</span> <span class="token punctuation">{</span>
  <span class="token builtin">string</span> message <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>gRPC uses <code>protoc</code> with a special gRPC plugin to generate code from your proto file: you get generated gRPC client and server code, as well as the regular protocol buffer code for populating, serializing, and retrieving your message types.</p> <p>To learn more about protocol buffers, see the <a href="https://developers.google.com/protocol-buffers/docs/overview" target="_blank" rel="noopener noreferrer">protocol buffers documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="_3-core-concepts"><a href="#_3-core-concepts" class="header-anchor">#</a> 3. Core concepts</h2> <h3 id="_3-1-service-definition"><a href="#_3-1-service-definition" class="header-anchor">#</a> 3.1 Service definition</h3> <p>Like many RPC systems, gRPC is based around the idea of defining a service, specifying the methods that can be called remotely with their parameters and return types. By default, gRPC uses protocol buffers as the <em>Interface Definition Language</em> (<strong>IDL</strong>) for describing both the service interface and the structure of the payload message. It is possible to use other alternatives if desired.</p> <div class="language-protobuf line-numbers-mode"><pre class="language-protobuf"><code><span class="token keyword">service</span> <span class="token class-name">HelloService</span> <span class="token punctuation">{</span>
  <span class="token keyword">rpc</span> <span class="token function">SayHello</span> <span class="token punctuation">(</span><span class="token class-name">HelloRequest</span><span class="token punctuation">)</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token class-name">HelloResponse</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">message</span> <span class="token class-name">HelloRequest</span> <span class="token punctuation">{</span>
  <span class="token builtin">string</span> greeting <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">message</span> <span class="token class-name">HelloResponse</span> <span class="token punctuation">{</span>
  <span class="token builtin">string</span> reply <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>gRPC lets you define four kinds of service method:</p> <ul><li><p>Unary RPCs where the client sends a single request to the server and gets a single response back, just like a normal function call.</p> <div class="language-protobuf line-numbers-mode"><pre class="language-protobuf"><code><span class="token keyword">rpc</span> <span class="token function">SayHello</span><span class="token punctuation">(</span><span class="token class-name">HelloRequest</span><span class="token punctuation">)</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token class-name">HelloResponse</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这里的定义方式有两种 <code>rpc SayHello(HelloRequest) returns (HelloResponse);</code> 和</p> <p><code>rpc SayHello(HelloRequest) returns (HelloResponse){}</code> ，在使用<code>option</code> 时使用 <code>{}</code> （例如 grpc-gateway translate the RESTful API into gRPC），不使用时两者是等价的</p></li> <li><p>Server streaming RPCs where the client sends a request to the server and gets a stream to read a sequence of message back. The client reads from the returned stream until there are no more messages. gRPC guarantees message ordering within an individual RPC call</p> <div class="language-protobuf line-numbers-mode"><pre class="language-protobuf"><code><span class="token keyword">rpc</span> <span class="token function">LotsOfReplies</span><span class="token punctuation">(</span><span class="token class-name">HelloRequest</span><span class="token punctuation">)</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token keyword">stream</span> <span class="token class-name">HelloResponse</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>Client streaming RPCs where the client writes a sequence of messages and sends them to the server, again using a provided stream. Once the client has finished writing the messages, it waits for the server to read them and return its response. Again gRPC guarantees message ordering within an individual RPC call.</p> <div class="language-protobuf line-numbers-mode"><pre class="language-protobuf"><code><span class="token keyword">rpc</span> <span class="token function">LotsOfGreetings</span><span class="token punctuation">(</span><span class="token keyword">stream</span> <span class="token class-name">HelloRequest</span><span class="token punctuation">)</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token class-name">HelloResponese</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>Bidirectional streaming RPCs where both sides send a sequence of messages using a read-write stream. The two streams operate independently, so clients and servers can read and write in whatever order they like: for example, the server could wait to receive all the client messages before writing its response, or it could alternately read a message then write a message, or some other combination of reads and writes. The order of message in each stream is preserved.</p> <div class="language-protobuf line-numbers-mode"><pre class="language-protobuf"><code><span class="token keyword">rpc</span> <span class="token function">BidiHello</span><span class="token punctuation">(</span><span class="token keyword">stream</span> <span class="token class-name">HelloRequest</span><span class="token punctuation">)</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token keyword">stream</span> <span class="token class-name">HelloResponse</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <h3 id="_3-2-using-the-api"><a href="#_3-2-using-the-api" class="header-anchor">#</a> 3.2 Using the API</h3> <p>Starting from a service definition in a <code>.proto</code> file, gRPC provides protocol buffer compiler plugins that generate client-and-server-side code. gRPC users typically call these APIs on the client side and implement the corresponding API on the server side.</p> <ul><li>On the server side, the server implements the methods declared by the service and runs a gRPC server to handle client calls. The gRPC infrastructure decodes incoming requests, executes service methods, and encodes service response.</li> <li>On the client side, the client has a local object known as <em>stub</em> (for some languages, the preferred term is <em>client</em>) that implements the same methods as the service. The client can then just call those methods on the local object, wrapping the parameters for the call in the appropriate protocol buffer message type - gRPC looks after sending the request(s) to the server and returning the server’s protocol buffer response(s).</li></ul> <h3 id="_3-3-synchronous-vs-asynchronous"><a href="#_3-3-synchronous-vs-asynchronous" class="header-anchor">#</a> 3.3 Synchronous vs. asynchronous</h3> <p>Synchronous RPC calls that block until a response arrives from the server are the closest approximation to the abstraction of a procedure call that RPC aspires to. On the other hand, networks are inherently asynchronous and in many scenarios it’s useful to be able to start RPCs without blocking the current thread.</p> <p>The gRPC programming API in most languages comes in both synchronous and asynchronous flavors.</p> <h2 id="_4-rpc-life-cycle"><a href="#_4-rpc-life-cycle" class="header-anchor">#</a> 4. RPC life cycle</h2> <p>In this section, you’ll take a closer look at what happens when a gRPC client calls a gRPC server method.</p> <h3 id="_4-1-unary-rpc"><a href="#_4-1-unary-rpc" class="header-anchor">#</a> 4.1 Unary RPC</h3> <p>First consider the simplest type of RPC where the client sends a single request and gets back a single response.</p> <ol><li>Once the client calls a stub method, the server is notified that the RPC has been invoked with the client’s metadata for this call, the method name, and the specified deadline if applicable.</li> <li>The server can then either send back its own initial metadata (which must be sent before any response)  straight away, or wait for the client’s request message. Which happens first, is application-specific.</li> <li>Once the server has the client’s request message, it does whatever work is necessary to create and populate a response.</li> <li>If the response status is OK, then the client gets the response, which completes the call on the client side.</li></ol> <h3 id="_4-2-server-streaming-rpc"><a href="#_4-2-server-streaming-rpc" class="header-anchor">#</a> 4.2 Server streaming RPC</h3> <p>A server-streaming RPC is similar to a unary RPC, except that the server returns a stream of messages in response to a client’s request. After sending all its messages, the server’s status details (status code and optional status message) and optional trailing metadata are sent to the client. This completes processing on the server side. The client completes once it has all the server’s messages.</p> <h3 id="_4-3-client-streaming-rpc"><a href="#_4-3-client-streaming-rpc" class="header-anchor">#</a> 4.3 Client streaming RPC</h3> <p>A client-streaming RPC is similar to a unary RPC, except that the client sends a stream of messages to the server instead of a single message. The server responds with a single message (along with its status details and optional trailing metadata), typically but not necessarily after it has received all the client’s messages.</p> <h3 id="_4-4-bidirectional-streaming-rpc"><a href="#_4-4-bidirectional-streaming-rpc" class="header-anchor">#</a> 4.4 Bidirectional streaming RPC</h3> <p>In a bidirectional streaming RPC, the call is initiated by the client invoking the method and the server receiving the client metadata, method name, and deadline. The server can choose to send back its initial metadata or wait for the client to start streaming messages.</p> <p>Client- and server-side stream processing is application specific. Since the two streams are independent, the client and server can read and write messages in any order. For example, a server can wait until it has received all of a client’s message before writing its messages, or the server and client can play “ping-pong” - the server gets a request, then sends back a response, then the client sends another request based on the response, and so on.</p> <h3 id="_4-5-deadlines-timeouts"><a href="#_4-5-deadlines-timeouts" class="header-anchor">#</a> 4.5 Deadlines/Timeouts</h3> <p>gRPC allows clients to specify how long they are willing to wait for an RPC to complete before the RPC is terminated with a <code>DEADLINE_EXCEEDED</code> error. On the server side, the server can query to see if a particular RPC has timed out, or how much time is left to complete the RPC.</p> <p>Specifying a deadline or timeout is language specific: some language APIs work in terms of timeouts (durations of time), and some language APIs work in terms of a deadline (a fixed point in time) and may or may not have a default deadline.</p> <h3 id="_4-6-rpc-termination"><a href="#_4-6-rpc-termination" class="header-anchor">#</a> 4.6 RPC termination</h3> <p>In gRPC, both the client and server make independent and local determinations of the success of the call, and their conclusions may not match. This means that, for example, you could have an RPC that finishes successfully on the server side (“I have sent all my response!”). It’s also possible for a server to decide to complete before a client has sent all its requests.</p> <h3 id="_4-6-cancelling-an-rpc"><a href="#_4-6-cancelling-an-rpc" class="header-anchor">#</a> 4.6 Cancelling an RPC</h3> <p>Either the client or the server can cancel an RPC at any time. A cancellation termiates the RPC immediately so that no further work is done.</p> <blockquote><p>Warning</p> <p>Changes made before a cancellation are not rolled back.</p></blockquote> <h3 id="_4-7-metadata"><a href="#_4-7-metadata" class="header-anchor">#</a> 4.7 Metadata</h3> <p>Meatadata is information about a particular RPC call (such as<a href="https://grpc.io/docs/guides/auth/" target="_blank" rel="noopener noreferrer">authentication details<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ) in the form of a list of key-value paris, where the keys are strings and the values are typically strings, but can be binary data. Metadata is opaque to gRPC itself - it lets the client provide information associated with the call to the server and vice versa.</p> <p>Access to metadata is language dependent.</p> <h3 id="_4-8-channels"><a href="#_4-8-channels" class="header-anchor">#</a> 4.8 Channels</h3> <p>A gRPC channel provides a connection to a gRPC server on a specified host and port. It is used when creating a client stub. Clients can specify channel arguments to modify gRPC’s default behavior, such as switching message compression on or off. A channel has state, including <code>connected</code> and <code>idle</code>.</p> <p>How gRPC deals with closing a channel is language dependent. Some languages also permit querying channel state.</p> <h2 id="reference"><a href="#reference" class="header-anchor">#</a> Reference</h2> <ol><li><a href="https://grpc.io/docs/what-is-grpc/" target="_blank" rel="noopener noreferrer">Introduction<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> gRPC docs</li> <li><a href="https://stackoverflow.com/questions/30106667/grpc-protobuf-3-syntax-what-is-the-difference-between-rpc-lines-that-end-with-s" target="_blank" rel="noopener noreferrer">difference between rpc lines end with semicolon vs ‘{}’<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> stackoverflow</li></ol></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2022/1/7 03:01:26</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/zh/rpc/gRPC/preface.html" class="prev">
            Preface
          </a></span> <span class="next"><a href="/zh/rpc/gRPC/quick_start.html">
            Quick Start
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-898d6c54><li class="level-2" data-v-898d6c54><a href="/zh/rpc/gRPC/introduction.html#_1-overview" class="sidebar-link reco-side-_1-overview" data-v-898d6c54>1. Overview</a></li><li class="level-2" data-v-898d6c54><a href="/zh/rpc/gRPC/introduction.html#_2-working-with-protocol-buffers" class="sidebar-link reco-side-_2-working-with-protocol-buffers" data-v-898d6c54>2. Working with Protocol Buffers</a></li><li class="level-2" data-v-898d6c54><a href="/zh/rpc/gRPC/introduction.html#_3-core-concepts" class="sidebar-link reco-side-_3-core-concepts" data-v-898d6c54>3. Core concepts</a></li><li class="level-3" data-v-898d6c54><a href="/zh/rpc/gRPC/introduction.html#_3-1-service-definition" class="sidebar-link reco-side-_3-1-service-definition" data-v-898d6c54>3.1 Service definition</a></li><li class="level-3" data-v-898d6c54><a href="/zh/rpc/gRPC/introduction.html#_3-2-using-the-api" class="sidebar-link reco-side-_3-2-using-the-api" data-v-898d6c54>3.2 Using the API</a></li><li class="level-3" data-v-898d6c54><a href="/zh/rpc/gRPC/introduction.html#_3-3-synchronous-vs-asynchronous" class="sidebar-link reco-side-_3-3-synchronous-vs-asynchronous" data-v-898d6c54>3.3 Synchronous vs. asynchronous</a></li><li class="level-2" data-v-898d6c54><a href="/zh/rpc/gRPC/introduction.html#_4-rpc-life-cycle" class="sidebar-link reco-side-_4-rpc-life-cycle" data-v-898d6c54>4. RPC life cycle</a></li><li class="level-3" data-v-898d6c54><a href="/zh/rpc/gRPC/introduction.html#_4-1-unary-rpc" class="sidebar-link reco-side-_4-1-unary-rpc" data-v-898d6c54>4.1 Unary RPC</a></li><li class="level-3" data-v-898d6c54><a href="/zh/rpc/gRPC/introduction.html#_4-2-server-streaming-rpc" class="sidebar-link reco-side-_4-2-server-streaming-rpc" data-v-898d6c54>4.2 Server streaming RPC</a></li><li class="level-3" data-v-898d6c54><a href="/zh/rpc/gRPC/introduction.html#_4-3-client-streaming-rpc" class="sidebar-link reco-side-_4-3-client-streaming-rpc" data-v-898d6c54>4.3 Client streaming RPC</a></li><li class="level-3" data-v-898d6c54><a href="/zh/rpc/gRPC/introduction.html#_4-4-bidirectional-streaming-rpc" class="sidebar-link reco-side-_4-4-bidirectional-streaming-rpc" data-v-898d6c54>4.4 Bidirectional streaming RPC</a></li><li class="level-3" data-v-898d6c54><a href="/zh/rpc/gRPC/introduction.html#_4-5-deadlines-timeouts" class="sidebar-link reco-side-_4-5-deadlines-timeouts" data-v-898d6c54>4.5 Deadlines/Timeouts</a></li><li class="level-3" data-v-898d6c54><a href="/zh/rpc/gRPC/introduction.html#_4-6-rpc-termination" class="sidebar-link reco-side-_4-6-rpc-termination" data-v-898d6c54>4.6 RPC termination</a></li><li class="level-3" data-v-898d6c54><a href="/zh/rpc/gRPC/introduction.html#_4-6-cancelling-an-rpc" class="sidebar-link reco-side-_4-6-cancelling-an-rpc" data-v-898d6c54>4.6 Cancelling an RPC</a></li><li class="level-3" data-v-898d6c54><a href="/zh/rpc/gRPC/introduction.html#_4-7-metadata" class="sidebar-link reco-side-_4-7-metadata" data-v-898d6c54>4.7 Metadata</a></li><li class="level-3" data-v-898d6c54><a href="/zh/rpc/gRPC/introduction.html#_4-8-channels" class="sidebar-link reco-side-_4-8-channels" data-v-898d6c54>4.8 Channels</a></li><li class="level-2" data-v-898d6c54><a href="/zh/rpc/gRPC/introduction.html#reference" class="sidebar-link reco-side-reference" data-v-898d6c54>Reference</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><canvas id="vuepress-canvas-cursor"></canvas><div></div><div id="goTop" class="hide-cat" data-v-bf92849a></div></div></div>
    <script src="/assets/js/app.a394ef45.js" defer></script><script src="/assets/js/6.5e9ba2d7.js" defer></script><script src="/assets/js/1.3bdf79e4.js" defer></script><script src="/assets/js/121.db4821de.js" defer></script>
  </body>
</html>
