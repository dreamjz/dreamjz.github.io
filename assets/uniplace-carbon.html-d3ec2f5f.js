import{_ as p,Y as o,Z as e,$ as n,a0 as s,a1 as t,a2 as c,F as i}from"./framework-d955655f.js";const u={},l=n("h1",{id:"简介",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#简介","aria-hidden":"true"},"#"),s(" 简介")],-1),r={href:"https://github.com/uniplaces",target:"_blank",rel:"noopener noreferrer"},d={href:"https://github.com/uniplaces/carbon",target:"_blank",rel:"noopener noreferrer"},k={href:"https://pkg.go.dev/time#Time",target:"_blank",rel:"noopener noreferrer"},m={href:"http://carbon.nesbot.com/",target:"_blank",rel:"noopener noreferrer"},v={href:"https://golang.org/pkg/time/#Time",target:"_blank",rel:"noopener noreferrer"},b=n("li",null,"支持时间运算",-1),f=n("li",null,"支持常用的日期格式",-1),g=n("li",null,"计算时间差异更简单",-1),q=c(`<h2 id="快速开始" tabindex="-1"><a class="header-anchor" href="#快速开始" aria-hidden="true">#</a> 快速开始</h2><p>使用<code>go get</code>安装</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>go get github.com/uniplaces/carbon@latest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>或在<code>go module</code>中导入</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>go get -u github.com/uniplaces/carbon latest
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;github.com/uniplaces/carbon&quot;</span>
	<span class="token string">&quot;time&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Right now is %s\\n&quot;</span><span class="token punctuation">,</span> carbon<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">DateTimeString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	today<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> carbon<span class="token punctuation">.</span><span class="token function">NowInLocation</span><span class="token punctuation">(</span><span class="token string">&quot;Japan&quot;</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Right now in Japan is %s\\n&quot;</span><span class="token punctuation">,</span> today<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Tomorrow is %s\\n&quot;</span><span class="token punctuation">,</span> carbon<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">AddDay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Last week is %s\\n&quot;</span><span class="token punctuation">,</span> carbon<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">SubWeek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	nextOlympics<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> carbon<span class="token punctuation">.</span><span class="token function">CreateFromDate</span><span class="token punctuation">(</span><span class="token number">2016</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span>August<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&quot;Europe/London&quot;</span><span class="token punctuation">)</span>
	nextOlympics <span class="token operator">=</span> nextOlympics<span class="token punctuation">.</span><span class="token function">AddYears</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Next Olympics are in %d\\n&quot;</span><span class="token punctuation">,</span> nextOlympics<span class="token punctuation">.</span><span class="token function">Year</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token keyword">if</span> carbon<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">IsWeekend</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Happy time&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ go run ./main.go 
Right now is <span class="token number">2021</span>-11-04 <span class="token number">10</span>:18:59
Right now <span class="token keyword">in</span> Japan is <span class="token number">2021</span>-11-04 <span class="token number">11</span>:18:59
Tomorrow is <span class="token number">2021</span>-11-05 <span class="token number">10</span>:18:59
Last week is <span class="token number">2021</span>-10-28 <span class="token number">10</span>:18:59
Next Olympics are <span class="token keyword">in</span> <span class="token number">2020</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>carbon</code>使用很便捷，其完全兼容标准库的<code>time.Time</code>类型，可以直接调用<code>time.Time</code>的方法，因为<code>carbon.Carbon</code>直接将<code>time.Time</code>内嵌到结构体中:</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// carbon@v0.1.6/carbon.go</span>
<span class="token comment">// The Carbon type represents a Time instance.</span>
<span class="token comment">// Provides a simple API extension for Time.</span>
<span class="token keyword">type</span> Carbon <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	time<span class="token punctuation">.</span>Time
	weekStartsAt time<span class="token punctuation">.</span>Weekday
	weekEndsAt   time<span class="token punctuation">.</span>Weekday
	weekendDays  <span class="token punctuation">[</span><span class="token punctuation">]</span>time<span class="token punctuation">.</span>Weekday
	stringFormat <span class="token builtin">string</span>
	Translator   <span class="token operator">*</span>Translator
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>carbon</code>简化了创建操作，<code>time</code>创建一个<code>Time</code>对象，若不为本地或UTC时区，需要自行调用<code>LoadLocation</code>加载对应时区，然后传给<code>time.Date</code>方法创建,<code>carbon</code>可以直接通过时区名称来创建</p><h2 id="时区" tabindex="-1"><a class="header-anchor" href="#时区" aria-hidden="true">#</a> 时区</h2><p>引用自维基百科的定义：</p><blockquote><p>时区是地球上的区域使用同一个时间定义。以前，人们通过观察太阳的位置（时角）决定时间，这就使得不同经度的地方的时间有所不同（地方时）。1863年，首次使用时区的概念。时区通过设立一个区域的标准时间部分地解决了这个问题。 世界各国位于地球不同位置上，因此不同国家，特别是东西跨度大的国家日出、日落时间必定有所偏差。这些偏差就是所谓的时差。</p></blockquote><p>例如，日本东京位于东九区，北京位于东八区，东九区时间比东八区快一个小时，日本时间11:00的时候中国时间为10:00</p><p>在linux中，时区文件一般存放在<code>/usr/share/zoneinfo</code>的目录中，时区文件为二进制文件，可以执行<code>info tzfile</code>查看说明</p><p>时区名称一般为<code>city</code>,<code>country/city</code>,<code>contitent/city</code>,例如<code>Asia/Shanghai</code>,<code>Asia/Hong_Kong</code>,也有特殊如UTC,Local等</p><p>Golang为了可移植性，集成了时区文件，在linux中放在<code>/usr/local/go/lib/time/zoneinfo.zip</code>中</p><p>使用<code>time</code>创建某个时区的时间，需要先加载时区，而使用<code>carbon</code>可以直接通过时区名称创建</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;github.com/uniplaces/carbon&quot;</span>
	<span class="token string">&quot;log&quot;</span>
	<span class="token string">&quot;time&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// creat date with time</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Create date with time:&quot;</span><span class="token punctuation">)</span>
	loc<span class="token punctuation">,</span> err <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">LoadLocation</span><span class="token punctuation">(</span><span class="token string">&quot;Japan&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span><span class="token string">&quot;failed to load location:&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	d <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">Date</span><span class="token punctuation">(</span><span class="token number">2021</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span>November<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">51</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> loc<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;time in japan is :%s\\n&quot;</span><span class="token punctuation">,</span> d<span class="token punctuation">)</span>
	<span class="token comment">// create date with carbon</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Create date with carbon:&quot;</span><span class="token punctuation">)</span>
	c<span class="token punctuation">,</span> err <span class="token operator">:=</span> carbon<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token number">2021</span><span class="token punctuation">,</span> time<span class="token punctuation">.</span>November<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">51</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;Japan&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;time in japan is :%s\\n&quot;</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="时间运算" tabindex="-1"><a class="header-anchor" href="#时间运算" aria-hidden="true">#</a> 时间运算</h2><p>使用<code>time</code>进行时间运算需要预先定义<code>time.Duration</code>对象，<code>time</code>预定义的只有纳秒到小时的精度(为了避免夏时制<sup class="footnote-ref"><a href="#footnote1">[1]</a><a class="footnote-anchor" id="footnote-ref1"></a></sup>带来的困扰)：</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// Common durations. There is no definition for units of Day or larger</span>
<span class="token comment">// to avoid confusion across daylight savings time zone transitions.</span>
<span class="token comment">//</span>
<span class="token comment">// To count the number of units in a Duration, divide:</span>
<span class="token comment">//	second := time.Second</span>
<span class="token comment">//	fmt.Print(int64(second/time.Millisecond)) // prints 1000</span>
<span class="token comment">//</span>
<span class="token comment">// To convert an integer number of units to a Duration, multiply:</span>
<span class="token comment">//	seconds := 10</span>
<span class="token comment">//	fmt.Print(time.Duration(seconds)*time.Second) // prints 10s</span>
<span class="token comment">//</span>
<span class="token keyword">const</span> <span class="token punctuation">(</span>
	Nanosecond  Duration <span class="token operator">=</span> <span class="token number">1</span>
	Microsecond          <span class="token operator">=</span> <span class="token number">1000</span> <span class="token operator">*</span> Nanosecond
	Millisecond          <span class="token operator">=</span> <span class="token number">1000</span> <span class="token operator">*</span> Microsecond
	Second               <span class="token operator">=</span> <span class="token number">1000</span> <span class="token operator">*</span> Millisecond
	Minute               <span class="token operator">=</span> <span class="token number">60</span> <span class="token operator">*</span> Second
	Hour                 <span class="token operator">=</span> <span class="token number">60</span> <span class="token operator">*</span> Minute
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>复杂时长需要使用<code>time.ParseDuration</code>构造，如&quot;3m20s&quot;,&quot;1h20m&quot;等。若想要增加<code>year/month/day</code>需要使用<code>time.Time</code>的<code>AddDate</code>方法</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;github.com/uniplaces/carbon&quot;</span>
	<span class="token string">&quot;log&quot;</span>
	<span class="token string">&quot;time&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	outputFormat <span class="token operator">:=</span> <span class="token string">&quot;%-30s:%s\\n&quot;</span>
	<span class="token comment">// calculate date with &#39;time&#39;</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Calculate date with &#39;time&#39;&quot;</span><span class="token punctuation">)</span>
	now <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;now&quot;</span><span class="token punctuation">,</span> now<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;one second later&quot;</span><span class="token punctuation">,</span> now<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;one minute later&quot;</span><span class="token punctuation">,</span> now<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Minute<span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;one hour later&quot;</span><span class="token punctuation">,</span> now<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Hour<span class="token punctuation">)</span><span class="token punctuation">)</span>

	dur<span class="token punctuation">,</span> err <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">ParseDuration</span><span class="token punctuation">(</span><span class="token string">&quot;3m20s&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;3 minutes and 20 seconds later&quot;</span><span class="token punctuation">,</span> now<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>dur<span class="token punctuation">)</span><span class="token punctuation">)</span>

	dur<span class="token punctuation">,</span> err <span class="token operator">=</span> time<span class="token punctuation">.</span><span class="token function">ParseDuration</span><span class="token punctuation">(</span><span class="token string">&quot;2h30m&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;2 hours and 30 minutes later&quot;</span><span class="token punctuation">,</span> now<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>dur<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token comment">// call AddDate instead of Add</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;3 days and 2 hours later&quot;</span><span class="token punctuation">,</span> now<span class="token punctuation">.</span><span class="token function">AddDate</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Hour<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token comment">// calculate date with &#39;carbon&#39;</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Calculate date with &#39;carbon&#39;&quot;</span><span class="token punctuation">)</span>
	cNow <span class="token operator">:=</span> carbon<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;now&quot;</span><span class="token punctuation">,</span> cNow<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;one second later&quot;</span><span class="token punctuation">,</span> cNow<span class="token punctuation">.</span><span class="token function">AddSecond</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;one minute later&quot;</span><span class="token punctuation">,</span> cNow<span class="token punctuation">.</span><span class="token function">AddMinute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;one hour later&quot;</span><span class="token punctuation">,</span> cNow<span class="token punctuation">.</span><span class="token function">AddHour</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;3 minutes and 20 seconds later&quot;</span><span class="token punctuation">,</span> cNow<span class="token punctuation">.</span><span class="token function">AddMinutes</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">AddSeconds</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;2 hours and 30 minutes later&quot;</span><span class="token punctuation">,</span> cNow<span class="token punctuation">.</span><span class="token function">AddHours</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">AddMinutes</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;3 days and 2 hours later&quot;</span><span class="token punctuation">,</span> cNow<span class="token punctuation">.</span><span class="token function">AddDays</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">AddHours</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ go run ./main.go     
Calculate <span class="token function">date</span> with <span class="token string">&#39;time&#39;</span>
now                           :2021-11-04 <span class="token number">12</span>:36:55.955753326 +0800 CST <span class="token assign-left variable">m</span><span class="token operator">=</span>+0.000066627
one second later              :2021-11-04 <span class="token number">12</span>:36:56.955753326 +0800 CST <span class="token assign-left variable">m</span><span class="token operator">=</span>+1.000066627
one minute later              :2021-11-04 <span class="token number">12</span>:37:55.955753326 +0800 CST <span class="token assign-left variable">m</span><span class="token operator">=</span>+60.000066627
one hour later                :2021-11-04 <span class="token number">13</span>:36:55.955753326 +0800 CST <span class="token assign-left variable">m</span><span class="token operator">=</span>+3600.000066627
<span class="token number">3</span> minutes and <span class="token number">20</span> seconds later:2021-11-04 <span class="token number">12</span>:40:15.955753326 +0800 CST <span class="token assign-left variable">m</span><span class="token operator">=</span>+200.000066627
<span class="token number">2</span> hours and <span class="token number">30</span> minutes later  :2021-11-04 <span class="token number">15</span>:06:55.955753326 +0800 CST <span class="token assign-left variable">m</span><span class="token operator">=</span>+9000.000066627
<span class="token number">3</span> days and <span class="token number">2</span> hours later      :2021-11-07 <span class="token number">14</span>:36:55.955753326 +0800 CST
Calculate <span class="token function">date</span> with <span class="token string">&#39;carbon&#39;</span>
now                           :2021-11-04 <span class="token number">12</span>:36:55
one second later              :2021-11-04 <span class="token number">12</span>:36:56
one minute later              :2021-11-04 <span class="token number">12</span>:37:55
one hour later                :2021-11-04 <span class="token number">13</span>:36:55
<span class="token number">3</span> minutes and <span class="token number">20</span> seconds later:2021-11-04 <span class="token number">12</span>:40:15
<span class="token number">2</span> hours and <span class="token number">30</span> minutes later  :2021-11-04 <span class="token number">15</span>:06:55
<span class="token number">3</span> days and <span class="token number">2</span> hours later      :2021-11-07 <span class="token number">14</span>:36:55

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>值得注意的是<code>carbon</code>和<code>time</code>的时间操作会返回一个新的对象，原对象不会改变</p><p>除了上例出现的方法之外，<code>carbon</code>还提供了：</p><ul><li><code>AddQuarters/AddQuarter</code>:增加季度</li><li><code>AddCenturies/AddCentury</code>：增加世纪</li><li><code>AddWeekdays/AddWeekday</code>:增加工作日，会跳过非工作日</li><li><code>AddWeeks/AddWeek</code>:增加星期</li></ul><p>在<code>Add*</code>方法中传入负数值表示减少，也可以调用响应的<code>Sub*</code>方法</p><h2 id="时间比较" tabindex="-1"><a class="header-anchor" href="#时间比较" aria-hidden="true">#</a> 时间比较</h2><p><code>time.Time</code>可以使用方法<code>Before/After/Equal</code>进行时间的比较，<code>carbon</code>除了使用这些方法之外，提供了额外的多组方法，每组一个简短名一个详细名：</p><ul><li><code>Eq/EqualTo</code>:是否相等</li><li><code>Ne/NotEqualTo</code>:是否不等</li><li><code>Gt/GreaterThan</code>:是否在指定时间之后</li><li><code>Lt/LessThan</code>:是否在指定时间之前</li><li><code>Lte/LessThanOrEqual</code>:是否在指定时间之前或相等</li><li><code>Between</code>:是否在指定的时间段内</li></ul><p>此外，还提供了判断用的方法：</p><ul><li><code>IsMongday/IsTuesday/.../IsSunday</code>:判断周几</li><li><code>IsWeekday/IsWeekend/IsLeapYear/IsPast/IsFuture</code>:判断</li></ul><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// go-daily-lib-note/uniplace-carbon/diff-date/main.go</span>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;github.com/uniplaces/carbon&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	outputFormat <span class="token operator">:=</span> <span class="token string">&quot;%-30s:%t\\n&quot;</span>

	date1<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> carbon<span class="token punctuation">.</span><span class="token function">CreateFromDate</span><span class="token punctuation">(</span><span class="token number">2010</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;Asia/Shanghai&quot;</span><span class="token punctuation">)</span>
	date2<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> carbon<span class="token punctuation">.</span><span class="token function">CreateFromDate</span><span class="token punctuation">(</span><span class="token number">2011</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;Asia/Shanghai&quot;</span><span class="token punctuation">)</span>
	date3<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> carbon<span class="token punctuation">.</span><span class="token function">CreateFromDate</span><span class="token punctuation">(</span><span class="token number">2010</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;Asia/Shanghai&quot;</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;date1:&quot;</span><span class="token punctuation">,</span> date1<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;date1:&quot;</span><span class="token punctuation">,</span> date2<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;date1:&quot;</span><span class="token punctuation">,</span> date3<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;date1 equal to  date2&quot;</span><span class="token punctuation">,</span> date1<span class="token punctuation">.</span><span class="token function">Eq</span><span class="token punctuation">(</span>date2<span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;date1 not equal to date2&quot;</span><span class="token punctuation">,</span> date1<span class="token punctuation">.</span><span class="token function">Ne</span><span class="token punctuation">(</span>date2<span class="token punctuation">)</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;date1 greater than date2&quot;</span><span class="token punctuation">,</span> date1<span class="token punctuation">.</span><span class="token function">Gt</span><span class="token punctuation">(</span>date2<span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;date1 less than date2&quot;</span><span class="token punctuation">,</span> date1<span class="token punctuation">.</span><span class="token function">Lt</span><span class="token punctuation">(</span>date2<span class="token punctuation">)</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;date3 between date1 and date2&quot;</span><span class="token punctuation">,</span> date3<span class="token punctuation">.</span><span class="token function">Between</span><span class="token punctuation">(</span>date1<span class="token punctuation">,</span> date2<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	now <span class="token operator">:=</span> carbon<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%-30s:%s\\n&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;now&quot;</span><span class="token punctuation">,</span> now<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;is weekday&quot;</span><span class="token punctuation">,</span> now<span class="token punctuation">.</span><span class="token function">IsWeekday</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;is weekend&quot;</span><span class="token punctuation">,</span> now<span class="token punctuation">.</span><span class="token function">IsWeekend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;is leap year&quot;</span><span class="token punctuation">,</span> now<span class="token punctuation">.</span><span class="token function">IsLeapYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;is past&quot;</span><span class="token punctuation">,</span> now<span class="token punctuation">.</span><span class="token function">IsPast</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;is future&quot;</span><span class="token punctuation">,</span> now<span class="token punctuation">.</span><span class="token function">IsFuture</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ go run ./main.go
date1: <span class="token number">2010</span>-01-01 09:32:41
date1: <span class="token number">2011</span>-02-01 09:32:41
date1: <span class="token number">2010</span>-12-01 09:32:41
date1 equal to  date2         :false
date1 not equal to date2      :true
date1 greater than date2      :false
date1 <span class="token function">less</span> than date2         :true
date3 between date1 and date2 :true
now                           :2021-11-05 09:32:41
is weekday                    :true
is weekend                    :false
is leap year                  :false
is past                       :true
is future                     :false
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>还可以使用<code>carbon</code>计算两个<code>date</code>之间相差多少秒，分，时，天等</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// go-daily-lib-note/uniplace-carbon/calculate-diff-date/main.go</span>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;github.com/uniplaces/carbon&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	date1<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> carbon<span class="token punctuation">.</span><span class="token function">CreateFromDate</span><span class="token punctuation">(</span><span class="token number">2021</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;Asia/Tokyo&quot;</span><span class="token punctuation">)</span>
	date2<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> carbon<span class="token punctuation">.</span><span class="token function">CreateFromDate</span><span class="token punctuation">(</span><span class="token number">2022</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;Asia/Tokyo&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>date1<span class="token punctuation">.</span><span class="token function">DiffInYears</span><span class="token punctuation">(</span>date2<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">// 1</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>date1<span class="token punctuation">.</span><span class="token function">DiffInMonths</span><span class="token punctuation">(</span>date2<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">// 12</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>date1<span class="token punctuation">.</span><span class="token function">DiffInDays</span><span class="token punctuation">(</span>date2<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// 365</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>date1<span class="token punctuation">.</span><span class="token function">DiffInHours</span><span class="token punctuation">(</span>date2<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">// 8760</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>date1<span class="token punctuation">.</span><span class="token function">DiffInMinutes</span><span class="token punctuation">(</span>date2<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 525600</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>date1<span class="token punctuation">.</span><span class="token function">DiffInSeconds</span><span class="token punctuation">(</span>date2<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 3153600</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="格式化" tabindex="-1"><a class="header-anchor" href="#格式化" aria-hidden="true">#</a> 格式化</h2><p><code>time.Time</code>的<code>Format</code>方法进行格式格式化是需要传入指定的字符串<code>2006-01-02 15:04:05.000</code>,这里的时间格式是固定的，可以按照<code>0(ms)1(M)2(d)3(h)4(m)5(s)6(y)</code>的方式记忆</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// go-daily-lib-note/uniplace-carbon/date-format/main.go</span>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;time&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	now <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>now<span class="token punctuation">.</span><span class="token function">Format</span><span class="token punctuation">(</span><span class="token string">&quot;2006-01-02 15:04:05.000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 2021-11-06 03:57:13.845</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>now<span class="token punctuation">.</span><span class="token function">Format</span><span class="token punctuation">(</span><span class="token string">&quot;2006/01/02 15/04/05.000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 2021/11/06 03/57/13</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>now<span class="token punctuation">.</span><span class="token function">Format</span><span class="token punctuation">(</span><span class="token string">&quot;15:04:05.000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token comment">// 03:57:13.845</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Go也内置一些标准时间格式：</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// time/format.go</span>
<span class="token keyword">const</span> <span class="token punctuation">(</span>
	Layout      <span class="token operator">=</span> <span class="token string">&quot;01/02 03:04:05PM &#39;06 -0700&quot;</span> <span class="token comment">// The reference time, in numerical order.</span>
	ANSIC       <span class="token operator">=</span> <span class="token string">&quot;Mon Jan _2 15:04:05 2006&quot;</span>
	UnixDate    <span class="token operator">=</span> <span class="token string">&quot;Mon Jan _2 15:04:05 MST 2006&quot;</span>
	RubyDate    <span class="token operator">=</span> <span class="token string">&quot;Mon Jan 02 15:04:05 -0700 2006&quot;</span>
	RFC822      <span class="token operator">=</span> <span class="token string">&quot;02 Jan 06 15:04 MST&quot;</span>
	RFC822Z     <span class="token operator">=</span> <span class="token string">&quot;02 Jan 06 15:04 -0700&quot;</span> <span class="token comment">// RFC822 with numeric zone</span>
	RFC850      <span class="token operator">=</span> <span class="token string">&quot;Monday, 02-Jan-06 15:04:05 MST&quot;</span>
	RFC1123     <span class="token operator">=</span> <span class="token string">&quot;Mon, 02 Jan 2006 15:04:05 MST&quot;</span>
	RFC1123Z    <span class="token operator">=</span> <span class="token string">&quot;Mon, 02 Jan 2006 15:04:05 -0700&quot;</span> <span class="token comment">// RFC1123 with numeric zone</span>
	RFC3339     <span class="token operator">=</span> <span class="token string">&quot;2006-01-02T15:04:05Z07:00&quot;</span>
	RFC3339Nano <span class="token operator">=</span> <span class="token string">&quot;2006-01-02T15:04:05.999999999Z07:00&quot;</span>
	Kitchen     <span class="token operator">=</span> <span class="token string">&quot;3:04PM&quot;</span>
	<span class="token comment">// Handy time stamps.</span>
	Stamp      <span class="token operator">=</span> <span class="token string">&quot;Jan _2 15:04:05&quot;</span>
	StampMilli <span class="token operator">=</span> <span class="token string">&quot;Jan _2 15:04:05.000&quot;</span>
	StampMicro <span class="token operator">=</span> <span class="token string">&quot;Jan _2 15:04:05.000000&quot;</span>
	StampNano  <span class="token operator">=</span> <span class="token string">&quot;Jan _2 15:04:05.000000000&quot;</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>uniplace/carbon</code>在上述格式之外提供了额外的格式：</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// src/github.com/uniplaces/carbon</span>
<span class="token keyword">const</span> <span class="token punctuation">(</span>
  DefaultFormat       <span class="token operator">=</span> <span class="token string">&quot;2006-01-02 15:04:05&quot;</span>
  DateFormat          <span class="token operator">=</span> <span class="token string">&quot;2006-01-02&quot;</span>
  FormattedDateFormat <span class="token operator">=</span> <span class="token string">&quot;Jan 2, 2006&quot;</span>
  TimeFormat          <span class="token operator">=</span> <span class="token string">&quot;15:04:05&quot;</span>
  HourMinuteFormat    <span class="token operator">=</span> <span class="token string">&quot;15:04&quot;</span>
  HourFormat          <span class="token operator">=</span> <span class="token string">&quot;15&quot;</span>
  DayDateTimeFormat   <span class="token operator">=</span> <span class="token string">&quot;Mon, Aug 2, 2006 3:04 PM&quot;</span>
  CookieFormat        <span class="token operator">=</span> <span class="token string">&quot;Monday, 02-Jan-2006 15:04:05 MST&quot;</span>
  RFC822Format        <span class="token operator">=</span> <span class="token string">&quot;Mon, 02 Jan 06 15:04:05 -0700&quot;</span>
  RFC1036Format       <span class="token operator">=</span> <span class="token string">&quot;Mon, 02 Jan 06 15:04:05 -0700&quot;</span>
  RFC2822Format       <span class="token operator">=</span> <span class="token string">&quot;Mon, 02 Jan 2006 15:04:05 -0700&quot;</span>
  RSSFormat           <span class="token operator">=</span> <span class="token string">&quot;Mon, 02 Jan 2006 15:04:05 -0700&quot;</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>需要注意的是<code>time</code>库默认使用<code>2006-01-02 15:04:05.999999999 -0700 MST</code>格式，而<code>uniplace/carbon</code>默认使用更简洁的<code>2006-01-02 15:04:05</code></p><h2 id="高级特性" tabindex="-1"><a class="header-anchor" href="#高级特性" aria-hidden="true">#</a> 高级特性</h2><h3 id="修饰符-modifier" tabindex="-1"><a class="header-anchor" href="#修饰符-modifier" aria-hidden="true">#</a> 修饰符（modifier）</h3><p>修饰符(modifier)为针对一些特定的时间操作，如开始和结束的时间，下个周一，下个工作日等</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// go-daily-lib-note/date-modifier/main.go</span>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;time&quot;</span>

	<span class="token string">&quot;github.com/uniplaces/carbon&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	outputFormat <span class="token operator">:=</span> <span class="token string">&quot;%-20s: %s\\n&quot;</span>
	now <span class="token operator">:=</span> carbon<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;Start of day&quot;</span><span class="token punctuation">,</span> now<span class="token punctuation">.</span><span class="token function">StartOfDay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;End of day&quot;</span><span class="token punctuation">,</span> now<span class="token punctuation">.</span><span class="token function">EndOfDay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;Start of month&quot;</span><span class="token punctuation">,</span> now<span class="token punctuation">.</span><span class="token function">StartOfMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;End of month&quot;</span><span class="token punctuation">,</span> now<span class="token punctuation">.</span><span class="token function">EndOfMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;Start of year&quot;</span><span class="token punctuation">,</span> now<span class="token punctuation">.</span><span class="token function">StartOfYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;Start of decade&quot;</span><span class="token punctuation">,</span> now<span class="token punctuation">.</span><span class="token function">StartOfDecade</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;End of decade&quot;</span><span class="token punctuation">,</span> now<span class="token punctuation">.</span><span class="token function">EndOfDecade</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;Start of century&quot;</span><span class="token punctuation">,</span> now<span class="token punctuation">.</span><span class="token function">StartOfCentury</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;End of century&quot;</span><span class="token punctuation">,</span> now<span class="token punctuation">.</span><span class="token function">EndOfCentury</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;Start of week&quot;</span><span class="token punctuation">,</span> now<span class="token punctuation">.</span><span class="token function">StartOfWeek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;End of week&quot;</span><span class="token punctuation">,</span> now<span class="token punctuation">.</span><span class="token function">EndOfWeek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;Next Wednesday&quot;</span><span class="token punctuation">,</span> now<span class="token punctuation">.</span><span class="token function">Next</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Wednesday<span class="token punctuation">)</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span>outputFormat<span class="token punctuation">,</span> <span class="token string">&quot;Previous Wednesday&quot;</span><span class="token punctuation">,</span> now<span class="token punctuation">.</span><span class="token function">Previous</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Wednesday<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>$ go run ./main.go
Start of day        <span class="token builtin class-name">:</span> <span class="token number">2021</span>-11-06 00:00:00
End of day          <span class="token builtin class-name">:</span> <span class="token number">2021</span>-11-06 <span class="token number">23</span>:59:59
Start of month      <span class="token builtin class-name">:</span> <span class="token number">2021</span>-11-01 00:00:00
End of month        <span class="token builtin class-name">:</span> <span class="token number">2021</span>-11-30 <span class="token number">23</span>:59:59
Start of year       <span class="token builtin class-name">:</span> <span class="token number">2021</span>-01-01 00:00:00
Start of decade     <span class="token builtin class-name">:</span> <span class="token number">2020</span>-01-01 00:00:00
End of decade       <span class="token builtin class-name">:</span> <span class="token number">2029</span>-12-31 <span class="token number">23</span>:59:59
Start of century    <span class="token builtin class-name">:</span> <span class="token number">2000</span>-01-01 00:00:00
End of century      <span class="token builtin class-name">:</span> <span class="token number">2099</span>-12-31 <span class="token number">23</span>:59:59
Start of week       <span class="token builtin class-name">:</span> <span class="token number">2021</span>-11-01 00:00:00
End of week         <span class="token builtin class-name">:</span> <span class="token number">2021</span>-11-07 <span class="token number">23</span>:59:59
Next Wednesday      <span class="token builtin class-name">:</span> <span class="token number">2021</span>-11-10 00:00:00
Previous Wednesday  <span class="token builtin class-name">:</span> <span class="token number">2021</span>-11-03 00:00:00
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="自定义工作日和周末" tabindex="-1"><a class="header-anchor" href="#自定义工作日和周末" aria-hidden="true">#</a> 自定义工作日和周末</h3><p>不同的地区每周开始会有所不同，<code>uniplace/carbon</code>可以自定义每周的开始和周末：</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// go-daily-lib-note/uniplace-carbon/custom-weekend/main.go</span>
<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;log&quot;</span>
	<span class="token string">&quot;time&quot;</span>

	<span class="token string">&quot;github.com/uniplaces/carbon&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	date<span class="token punctuation">,</span> err <span class="token operator">:=</span> carbon<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token number">2021</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;Asia/Shanghai&quot;</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	date<span class="token punctuation">.</span><span class="token function">SetWeekStartsAt</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Sunday<span class="token punctuation">)</span>
	date<span class="token punctuation">.</span><span class="token function">SetWeekEndsAt</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Saturday<span class="token punctuation">)</span>
	date<span class="token punctuation">.</span><span class="token function">SetWeekendDays</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span>time<span class="token punctuation">.</span>Weekday<span class="token punctuation">{</span>time<span class="token punctuation">.</span>Monday<span class="token punctuation">,</span> time<span class="token punctuation">.</span>Tuesday<span class="token punctuation">,</span> time<span class="token punctuation">.</span>Thursday<span class="token punctuation">,</span> time<span class="token punctuation">.</span>Friday<span class="token punctuation">}</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Today is %s,weekend? %t\\n&quot;</span><span class="token punctuation">,</span> date<span class="token punctuation">.</span><span class="token function">Weekday</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> date<span class="token punctuation">.</span><span class="token function">IsWeekend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结" aria-hidden="true">#</a> 总结</h2><p>时间的处理是个复杂的问题，需要考虑诸如时区，夏令时，闰秒，闰年等问题，使用第三方时间处理库能够很大提升开发效率</p><h2 id="参考" tabindex="-1"><a class="header-anchor" href="#参考" aria-hidden="true">#</a> 参考</h2>`,57),h={href:"https://github.com/uniplaces",target:"_blank",rel:"noopener noreferrer"},w={href:"https://github.com/uniplaces/carbon",target:"_blank",rel:"noopener noreferrer"},y={href:"https://darjun.github.io/2020/02/14/godailylib/carbon/",target:"_blank",rel:"noopener noreferrer"},_={href:"https://zh.wikipedia.org/wiki/%E6%97%B6%E5%8C%BA",target:"_blank",rel:"noopener noreferrer"},F={href:"https://pkg.go.dev/time",target:"_blank",rel:"noopener noreferrer"},P=n("hr",{class:"footnotes-sep"},null,-1),S={class:"footnotes"},T={class:"footnotes-list"},A={id:"footnote1",class:"footnote-item"},x={href:"https://zh.wikipedia.org/wiki/%E5%A4%8F%E6%97%B6%E5%88%B6",target:"_blank",rel:"noopener noreferrer"},C=n("strong",null,"夏时制",-1),D=n("strong",null,"夏令时",-1),M=n("strong",null,"日光节约时间",-1),N={href:"https://zh.wikipedia.org/wiki/%E5%A4%8F%E5%AD%A3",target:"_blank",rel:"noopener noreferrer"},E=n("a",{href:"#footnote-ref1",class:"footnote-backref"},"↩︎",-1);function W(I,J){const a=i("ExternalLinkIcon");return o(),e("div",null,[l,n("p",null,[n("a",r,[s("uniplaces"),t(a)]),s("/"),n("a",d,[s("carbon"),t(a)]),s("是"),n("a",k,[s("Time"),t(a)]),s("的简单扩展，基于PHP的"),n("a",m,[s("Carbon"),t(a)]),s("库，特性：")]),n("ul",null,[n("li",null,[s("内部集成"),n("a",v,[s("Time"),t(a)]),s("，可以使用所有Time的功能")]),b,f,g]),q,n("ol",null,[n("li",null,[n("a",h,[s("uniplaces"),t(a)]),s("/"),n("a",w,[s("carbon"),t(a)]),s(" github repo")]),n("li",null,[n("a",y,[s("Go 每日一库之 carbon"),t(a)]),s(" darjun blog")]),n("li",null,[n("a",_,[s("时区"),t(a)]),s(" 维基百科")]),n("li",null,[n("a",F,[s("time"),t(a)]),s(" time godocs")])]),P,n("section",S,[n("ol",T,[n("li",A,[n("p",null,[n("a",x,[C,t(a)]),s("（美国及加拿大英语：daylight time），又称"),D,s("、"),M,s("（美国及加拿大称为daylight saving time，简称DST；英国与其他地区称为Summer Time），是一种在"),n("a",N,[s("夏季"),t(a)]),s("月份牺牲正常的日出时间，而将时间调快的做法 "),E])])])])])}const O=p(u,[["render",W],["__file","uniplace-carbon.html.vue"]]);export{O as default};
