(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{598:function(n,s,e){"use strict";e.r(s);var a=e(4),t=Object(a.a)({},(function(){var n=this,s=n.$createElement,e=n._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[e("p",[n._v("Nginx 是一款面向性能设计的 HTTP 服务器，能反向代理 HTTP，HTTPS 和邮件相关(SMTP，POP3，IMAP)的协议链接。并且提供了负载均衡以及 HTTP 缓存。它的设计充分使用异步事件模型，削减上下文调度的开销，提高服务器并发能力。采用了模块化设计，提供了丰富模块的第三方模块")]),n._v(" "),e("p",[n._v("本文介绍docker如何部署nginx")]),n._v(" "),e("h2",{attrs:{id:"快速开始"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#快速开始"}},[n._v("#")]),n._v(" 快速开始")]),n._v(" "),e("p",[n._v("在docker hub查找镜像")]),n._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[n._v("$ docker search nginx \nNAME                              DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED\nnginx                             Official build of Nginx.                        "),e("span",{pre:!0,attrs:{class:"token number"}},[n._v("15728")]),n._v("     "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("[")]),n._v("OK"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("]")]),n._v("       \njwilder/nginx-proxy               Automated Nginx reverse proxy "),e("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("for")]),n._v(" docker con…   "),e("span",{pre:!0,attrs:{class:"token number"}},[n._v("2088")]),n._v("                 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("[")]),n._v("OK"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("]")]),n._v("\nricharvey/nginx-php-fpm           Container running Nginx + PHP-FPM capable of…   "),e("span",{pre:!0,attrs:{class:"token number"}},[n._v("818")]),n._v("                  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("[")]),n._v("OK"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("]")]),n._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("..")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("..")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("..")]),n._v("\n")])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br"),e("span",{staticClass:"line-number"},[n._v("2")]),e("br"),e("span",{staticClass:"line-number"},[n._v("3")]),e("br"),e("span",{staticClass:"line-number"},[n._v("4")]),e("br"),e("span",{staticClass:"line-number"},[n._v("5")]),e("br"),e("span",{staticClass:"line-number"},[n._v("6")]),e("br")])]),e("p",[n._v("这里使用官方镜像，下载：")]),n._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[n._v("$ docker pull nginx\n")])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br")])]),e("p",[n._v("启动容器")]),n._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[n._v("$ docker container run --name my-nginx -d --rm -p "),e("span",{pre:!0,attrs:{class:"token number"}},[n._v("8080")]),n._v(":80 nginx /bin/bash\n24167b75db40bb32a59699f4c799b1c5009cad5853712caa7fe68ddafb85125d\n")])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br"),e("span",{staticClass:"line-number"},[n._v("2")]),e("br")])]),e("ul",[e("li",[e("code",[n._v("--name")]),n._v(":指定容器名")]),n._v(" "),e("li",[e("code",[n._v("-p")]),n._v(": host_port:container_port,主机端口和容器端口映射")]),n._v(" "),e("li",[e("code",[n._v("--rm")]),n._v(":容器停止后文件自动删除")])]),n._v(" "),e("p",[n._v("这里的"),e("code",[n._v("docker container run")]),n._v(" 和"),e("code",[n._v("docker run")]),n._v("是一样的，"),e("code",[n._v("docker container run")]),n._v("为docker 1.13进行CLI重构时新增")]),n._v(" "),e("p",[n._v("查看容器日志：")]),n._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[n._v("docker logs my-nginx\n")])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br")])]),e("p",[n._v("在浏览器访问"),e("code",[n._v("localhost:8080")]),n._v(",可以看到nginx的初始页面了")]),n._v(" "),e("h2",{attrs:{id:"挂载本地文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#挂载本地文件"}},[n._v("#")]),n._v(" 挂载本地文件")]),n._v(" "),e("p",[n._v("资源文件都放在容器里面，不方便修改，可以将本地文件挂载到容器中")]),n._v(" "),e("p",[n._v("在本地创建目录：")]),n._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[n._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[n._v("mkdir")]),n._v(" -p ~/nginx/app\n")])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br")])]),e("p",[n._v("在"),e("code",[n._v("app")]),n._v("里创建一个html文件：")]),n._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[n._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[n._v("echo")]),n._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[n._v("'<h1>Hello World</h1>'")]),n._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[n._v(">")]),n._v(" index.html\n")])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br")])]),e("p",[n._v("启动容器，这次加上"),e("code",[n._v("-v host_dir:container_dir")]),n._v(",挂载本地文件：")]),n._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[n._v("docker container run \\\n-d \\\n-p 8080:80 \\\n--rm \\\n--name mynginx \\\n--volume $PWD:/usr/share/nginx/html \\\nnginx\n")])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br"),e("span",{staticClass:"line-number"},[n._v("2")]),e("br"),e("span",{staticClass:"line-number"},[n._v("3")]),e("br"),e("span",{staticClass:"line-number"},[n._v("4")]),e("br"),e("span",{staticClass:"line-number"},[n._v("5")]),e("br"),e("span",{staticClass:"line-number"},[n._v("6")]),e("br"),e("span",{staticClass:"line-number"},[n._v("7")]),e("br")])]),e("p",[n._v("在浏览器访问"),e("code",[n._v("localhost:8080")]),n._v(",可以看到Hello World了")]),n._v(" "),e("h2",{attrs:{id:"拷贝配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#拷贝配置"}},[n._v("#")]),n._v(" 拷贝配置")]),n._v(" "),e("p",[n._v("将容器里面的Nginx配置文件拷贝到本地：")]),n._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[n._v("$ docker container "),e("span",{pre:!0,attrs:{class:"token function"}},[n._v("cp")]),n._v(" mynginx:/etc/nginx/ ~/nginx\n")])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br")])]),e("p",[n._v("名称改为"),e("code",[n._v("conf")]),n._v(":")]),n._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[n._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[n._v("mv")]),n._v(" nginx conf\n")])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br")])]),e("p",[n._v("停止"),e("code",[n._v("mynginx")]),n._v("挂载配置文件：")]),n._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[n._v("$ docker stop mynginx\nmynginx\n$ docker container run "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v("\n -d "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v("\n -p "),e("span",{pre:!0,attrs:{class:"token number"}},[n._v("8080")]),n._v(":80 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v("\n --rm "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v("\n --name mynginx "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v("\n -v "),e("span",{pre:!0,attrs:{class:"token environment constant"}},[n._v("$HOME")]),n._v("/nginx/conf:/etc/nginx "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v("\n -v "),e("span",{pre:!0,attrs:{class:"token environment constant"}},[n._v("$HOME")]),n._v("/nginx/app:/usr/share/nginx/html "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("\\")]),n._v(" \n nginx\n")])]),n._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[n._v("1")]),e("br"),e("span",{staticClass:"line-number"},[n._v("2")]),e("br"),e("span",{staticClass:"line-number"},[n._v("3")]),e("br"),e("span",{staticClass:"line-number"},[n._v("4")]),e("br"),e("span",{staticClass:"line-number"},[n._v("5")]),e("br"),e("span",{staticClass:"line-number"},[n._v("6")]),e("br"),e("span",{staticClass:"line-number"},[n._v("7")]),e("br"),e("span",{staticClass:"line-number"},[n._v("8")]),e("br"),e("span",{staticClass:"line-number"},[n._v("9")]),e("br"),e("span",{staticClass:"line-number"},[n._v("10")]),e("br")])]),e("p",[n._v("在浏览器访问"),e("code",[n._v("localhost:8080")]),n._v(",可以看到Hello World了")]),n._v(" "),e("h2",{attrs:{id:"参考"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[n._v("#")]),n._v(" 参考")]),n._v(" "),e("ol",[e("li",[e("p",[e("a",{attrs:{href:"https://github.com/jaywcjlove/docker-tutorial/blob/master/docker/nginx.md",target:"_blank",rel:"noopener noreferrer"}},[n._v("Docker部署nginx"),e("OutboundLink")],1),n._v(" github repo")])]),n._v(" "),e("li",[e("p",[e("a",{attrs:{href:"https://github.com/jaywcjlove/nginx-tutorial",target:"_blank",rel:"noopener noreferrer"}},[n._v("nginx-tutorial"),e("OutboundLink")],1),n._v(" github repo")])]),n._v(" "),e("li",[e("p",[e("a",{attrs:{href:"https://www.ruanyifeng.com/blog/2018/02/nginx-docker.html",target:"_blank",rel:"noopener noreferrer"}},[n._v("Nginx 容器教程"),e("OutboundLink")],1),n._v("  阮一峰")])]),n._v(" "),e("li",[e("p",[e("a",{attrs:{href:"https://docs.docker.com/engine/reference/commandline/run/",target:"_blank",rel:"noopener noreferrer"}},[n._v("docker docs"),e("OutboundLink")],1),n._v(" docker docs/docker run")])]),n._v(" "),e("li",[e("p",[e("a",{attrs:{href:"https://stackoverflow.com/questions/51247609/what-is-the-difference-between-docker-run-and-docker-container-run",target:"_blank",rel:"noopener noreferrer"}},[n._v("What is the difference between docker run and docker container run"),e("OutboundLink")],1),n._v(" stackoverflow")])]),n._v(" "),e("li",[e("p",[e("a",{attrs:{href:"https://www.docker.com/blog/whats-new-in-docker-1-13/",target:"_blank",rel:"noopener noreferrer"}},[n._v("Introducing Docker 1.13"),e("OutboundLink")],1)])])])])}),[],!1,null,null,null);s.default=t.exports}}]);