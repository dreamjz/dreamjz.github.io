(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{604:function(s,a,e){"use strict";e.r(a);var n=e(5),t=Object(n.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("p",[s._v("Docker是一个开源的应用容器引擎，容器是一个虚拟化的独立环境，开发者可以部署应用到一个可移植的容器中，然后发布到任何流行的linux机器上，也可以实现虚拟化")]),s._v(" "),e("p",[s._v("Docker 从 "),e("code",[s._v("1.13")]),s._v(" 版本之后采用时间线的方式作为版本号，分为社区版 "),e("code",[s._v("CE")]),s._v(" 和企业版 "),e("code",[s._v("EE")]),s._v("，社区版是免费提供给个人开发者和小型团体使用的，企业版会提供额外的收费服务，比如经过官方测试认证过的基础设施、容器、插件等")]),s._v(" "),e("p",[s._v("社区版按照 "),e("code",[s._v("stable")]),s._v(" 和 "),e("code",[s._v("edge")]),s._v(" 两种方式发布，每个季度更新 "),e("code",[s._v("stable")]),s._v(" 版本，如 "),e("code",[s._v("17.06")]),s._v("，"),e("code",[s._v("17.09")]),s._v("；每个月份更新 "),e("code",[s._v("edge")]),s._v(" 版本，如"),e("code",[s._v("17.09")]),s._v("，"),e("code",[s._v("17.10")])]),s._v(" "),e("h2",{attrs:{id:"安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),e("p",[s._v("本文操作环境为"),e("code",[s._v("Manjaro")]),s._v(",使用"),e("code",[s._v("pacman")]),s._v("进行安装：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("sudo pacman -S docker\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("查看版本:")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("docker version\nClient:\n Version:           "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("20.10")]),s._v(".9\n API version:       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.41")]),s._v("\n Go version:        go1.17.1\n Git commit:        c2ea9bc90b\n Built:             Mon Oct  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(":13:02 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("\n OS/Arch:           linux/amd64\n Context:           default\n Experimental:      "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("p",[s._v("启动服务：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("sudo systemctl start docker.service\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("或设置开机启动：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("sudo systemctl enable docker.service\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("运行"),e("code",[s._v("hello-world")]),s._v("镜像，验证安装是否成功")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker run hello-world    \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("注意默认"),e("code",[s._v("docker")]),s._v("指令需要"),e("code",[s._v("root")]),s._v("用户权限，可以将当前用户加入"),e("code",[s._v("docker group")])]),s._v(" "),e("p",[s._v("查看当前用户群组：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /etc/group"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" docker \ndocker:x:961:\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("若"),e("code",[s._v("docker")]),s._v("不存在则创建：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("groupadd")]),s._v(" docker\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("将当前用户加入"),e("code",[s._v("docker")]),s._v("群组")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("usermod")]),s._v(" -aG docker "),e("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$USER")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("以新的组登录")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ newgrp docker\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("测试"),e("code",[s._v("hello-world")])]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ docker run hello-world\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#命令"}},[s._v("#")]),s._v(" 命令")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("$ docker --help\n\n管理命令:\n  container   管理容器\n  image       管理镜像\n  network     管理网络\n命令：\n  attach      介入到一个正在运行的容器\n  build       根据 Dockerfile 构建一个镜像\n  commit      根据容器的更改创建一个新的镜像\n  cp          在本地文件系统与容器中复制 文件/文件夹\n  create      创建一个新容器\n  exec        在容器中执行一条命令\n  images      列出镜像\n  kill        杀死一个或多个正在运行的容器    \n  logs        取得容器的日志\n  pause       暂停一个或多个容器的所有进程\n  ps          列出所有容器\n  pull        拉取一个镜像或仓库到 registry\n  push        推送一个镜像或仓库到 registry\n  rename      重命名一个容器\n  restart     重新启动一个或多个容器\n  rm          删除一个或多个容器\n  rmi         删除一个或多个镜像\n  run         在一个新的容器中执行一条命令\n  search      在 Docker Hub 中搜索镜像\n  start       启动一个或多个已经停止运行的容器\n  stats       显示一个容器的实时资源占用\n  stop        停止一个或多个正在运行的容器\n  tag         为镜像创建一个新的标签\n  top         显示一个容器内的所有进程\n  unpause     恢复一个或多个容器内所有被暂停的进程\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br")])]),e("h2",{attrs:{id:"容器使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#容器使用"}},[s._v("#")]),s._v(" 容器使用")]),s._v(" "),e("h3",{attrs:{id:"启动容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#启动容器"}},[s._v("#")]),s._v(" 启动容器")]),s._v(" "),e("p",[s._v("使用"),e("code",[s._v("docker pull")]),s._v("获取"),e("code",[s._v("centos")]),s._v("镜像：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker pull centos:latest\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("查看镜像：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ docker images                                       \nREPOSITORY    TAG       IMAGE ID       CREATED       SIZE\nhello-world   latest    feb5d9fea6a5   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" weeks ago   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(".3kB\ncentos        latest    5d0da3dc9764   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" weeks ago   231MB\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("使用"),e("code",[s._v("centos")]),s._v("镜像启动容器：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("docker run -it centos /bin/bash\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ul",[e("li",[e("code",[s._v("i")]),s._v(":交互式操作")]),s._v(" "),e("li",[e("code",[s._v("t")]),s._v(":终端")]),s._v(" "),e("li",[e("code",[s._v("centos")]),s._v(":镜像名")]),s._v(" "),e("li",[e("code",[s._v("/bin/bash")]),s._v(":命令，启动bash")])]),s._v(" "),e("p",[s._v("执行"),e("code",[s._v("exit")]),s._v("可以退出容器，此时容器会停止")]),s._v(" "),e("p",[s._v("查看所有容器,"),e("code",[s._v("docker ps")]),s._v("查看正在运行的容器：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("docker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -a \nCONTAINER ID   IMAGE         COMMAND       CREATED          STATUS                      PORTS     NAMES\nda34e8514a0e   centos        "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/bash"')]),s._v("   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v(" minutes ago   Exited "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" second ago               admiring_buck\nd03b9c3fa042   hello-world   "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/hello"')]),s._v("      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" minutes ago   Exited "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),s._v(" minutes ago             magical_panini\n105c030cdc8c   hello-world   "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/hello"')]),s._v("      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("41")]),s._v(" minutes ago   Exited "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("41")]),s._v(" minutes ago             eager_haslett\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("启动，停止，重启已停止的容器：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ docker start CONTAINER_ID\nCONTAINER_ID\n$ docker stop CONTAINER_ID\nCONTAINER_ID\n$ docker restart CONTAINER_ID\nCONTAINER_ID\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("删除容器：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ docker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -f CONTAINER_ID\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"后台启动容器-daemon"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#后台启动容器-daemon"}},[s._v("#")]),s._v(" 后台启动容器（daemon）")]),s._v(" "),e("p",[s._v("启动容器时使用"),e("code",[s._v("-d")]),s._v(",可以将容器作为守护进程（daemon）在后台运行，需要使用"),e("code",[s._v("attach")]),s._v("或"),e("code",[s._v("exec")]),s._v("指令进入容器")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("docker run -itd centos /bin/bash\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"docker-attach"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-attach"}},[s._v("#")]),s._v(" "),e("code",[s._v("docker attach")])]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ docker attach CONTAINER_ID\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("注意在退出容器后，容器将会停止")]),s._v(" "),e("h4",{attrs:{id:"docker-exec"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-exec"}},[s._v("#")]),s._v(" "),e("code",[s._v("docker exec")])]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ docker "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it CONTAINER_ID COMMAND \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"导入和导出容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#导入和导出容器"}},[s._v("#")]),s._v(" 导入和导出容器")]),s._v(" "),e("p",[s._v("使用"),e("code",[s._v("docker export")]),s._v("可将容器导出到本地快照")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ docker "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" cb50e17da895 "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" ./centos.tar  \n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("导入容器快照作为镜像：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" centos.tar"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("docker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v(" - test/centos:local\n sha256:b4e46ee456b5b7ecb4cf35bb3b3c3d5c09230020a87c5f18f71a9004cadf2668\n$ docker images\nREPOSITORY    TAG       IMAGE ID       CREATED         SIZE\ntest/centos   "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("     b4e46ee456b5   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" seconds ago   231MB\nhello-world   latest    feb5d9fea6a5   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" weeks ago     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(".3kB\ncentos        latest    5d0da3dc9764   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" weeks ago     231MB\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("h2",{attrs:{id:"镜像使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#镜像使用"}},[s._v("#")]),s._v(" 镜像使用")]),s._v(" "),e("h3",{attrs:{id:"设置镜像加速"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#设置镜像加速"}},[s._v("#")]),s._v(" 设置镜像加速")]),s._v(" "),e("p",[s._v("此处使用网易云镜像服务："),e("code",[s._v("https://hub-mirror.c.163.com")])]),s._v(" "),e("p",[s._v("请首先执行以下命令，查看是否在 "),e("code",[s._v("docker.service")]),s._v(" 文件中配置过镜像地址")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("$ systemctl cat docker | grep '\\-\\-registry\\-mirror'\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("如果该命令有输出，那么请执行 "),e("code",[s._v("$ systemctl cat docker")]),s._v(" 查看 "),e("code",[s._v("ExecStart=")]),s._v(" 出现的位置，修改对应的文件内容去掉 "),e("code",[s._v("--registry-mirror")]),s._v(" 参数及其值，并按接下来的步骤进行配置。")]),s._v(" "),e("p",[s._v("如果以上命令没有任何输出，那么就可以在 "),e("code",[s._v("/etc/docker/daemon.json")]),s._v(" 中写入如下内容（如果文件不存在请新建该文件）：")]),s._v(" "),e("div",{staticClass:"language-json line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"registry-mirrors"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://hub-mirror.c.163.com"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://mirror.baidubce.com"')]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("blockquote",[e("p",[s._v("注意，一定要保证该文件符合 json 规范，否则 Docker 将不能启动")])]),s._v(" "),e("p",[s._v("之后重新启动服务:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("$ sudo systemctl daemon-reload\n$ sudo systemctl restart docker\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"查看镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看镜像"}},[s._v("#")]),s._v(" 查看镜像")]),s._v(" "),e("p",[s._v("使用"),e("code",[s._v("docker images")]),s._v("可以查看本地主机的镜像，信息说明：")]),s._v(" "),e("ul",[e("li",[s._v("REPOSITORY ： 镜像的仓库")]),s._v(" "),e("li",[s._v("TAG： 镜像标签")]),s._v(" "),e("li",[s._v("CREATED： 镜像创建时间")]),s._v(" "),e("li",[s._v("SIZE：镜像大小")])]),s._v(" "),e("p",[s._v("同一仓库的镜像有不同的tag，可以使用"),e("code",[s._v("repository:tag")]),s._v("来指定某一镜像")]),s._v(" "),e("p",[s._v("获取镜像时，不指定tag，则默认为"),e("code",[s._v("latest")])]),s._v(" "),e("h3",{attrs:{id:"搜索镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#搜索镜像"}},[s._v("#")]),s._v(" 搜索镜像")]),s._v(" "),e("p",[s._v("可以在"),e("a",{attrs:{href:"https://hub.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("Dokcer Hub"),e("OutboundLink")],1),s._v("查找镜像，也可以使用"),e("code",[s._v("docker search")]),s._v(":")]),s._v(" "),e("p",[s._v("搜索"),e("code",[s._v("centos")]),s._v(":")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$docker")]),s._v(" search centos                                                                       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(":48:33 \nNAME                              DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED\ncentos                            The official build of CentOS.                   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6833")]),s._v("      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("       \nansible/centos7-ansible           Ansible on Centos7                              "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("135")]),s._v("                  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nconsol/centos-xfce-vnc            Centos container with "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"headless"')]),s._v(" VNC session…   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("132")]),s._v("                  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\njdeathe/centos-ssh                OpenSSH / Supervisor / EPEL/IUS/SCL Repos - …   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("121")]),s._v("                  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\ncentos/systemd                    systemd enabled base container.                 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("105")]),s._v("                  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OK"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[s._v("使用"),e("code",[s._v("docker pull")]),s._v("下载镜像，"),e("code",[s._v("docker rmi")]),s._v("移除镜像：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ docker pull centos:5.11\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n$ docker rmi centos:5.11\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h3",{attrs:{id:"创建镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建镜像"}},[s._v("#")]),s._v(" 创建镜像")]),s._v(" "),e("p",[s._v("当从docker镜像仓库下载的镜像不能满足时，有两种方式创建自定义的镜像：")]),s._v(" "),e("ul",[e("li",[s._v("从已有的仓库中提交镜像")]),s._v(" "),e("li",[s._v("使用Docker File创建镜像")])]),s._v(" "),e("h4",{attrs:{id:"使用docker-commit提交镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用docker-commit提交镜像"}},[s._v("#")]),s._v(" 使用docker commit提交镜像")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ docker commit -m "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"a new image"')]),s._v(" -a "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"me"')]),s._v(" cb50e17da895 dreamjz/centos:local\nsha256:7a7a770a75a350729b9c84e512c97515e10e3075266eca8e2294b83321bd6c26\n$ docker images\nREPOSITORY       TAG       IMAGE ID       CREATED         SIZE\ndreamjz/centos   "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("     7a7a770a75a3   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" seconds ago   231MB\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("ul",[e("li",[e("code",[s._v("-m")]),s._v("：提交的描述信息")]),s._v(" "),e("li",[e("code",[s._v("-a")]),s._v(": 指定镜像作者")]),s._v(" "),e("li",[e("code",[s._v("cb50e17da895")]),s._v(": 容器ID")]),s._v(" "),e("li",[e("code",[s._v("dreamjz/centos:local")]),s._v(": 目标镜像名")])]),s._v(" "),e("h4",{attrs:{id:"使用dokerfile构建镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#使用dokerfile构建镜像"}},[s._v("#")]),s._v(" 使用Dokerfile构建镜像")]),s._v(" "),e("p",[s._v("DockerFile是一个用来构建镜像的文本文件，内容包含了一条条构建镜像所需的指令和说明")]),s._v(" "),e("p",[s._v("下面以定制一个nginx镜像为例")]),s._v(" "),e("p",[s._v("创建一个空目录"),e("code",[s._v("\\$HOME/tmp/")]),s._v(",创建"),e("code",[s._v("Dockerfile")]),s._v(":")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" ~/tmp\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" tmp\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" Dockerfile\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("写入内容：")]),s._v(" "),e("div",{staticClass:"language-dockerfile line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[e("code",[e("span",{pre:!0,attrs:{class:"token instruction"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" nginx")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token instruction"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" echo "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Local nginx imamge'")]),s._v(" > /usr/share/nginx/html/index.html")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("ul",[e("li",[e("code",[s._v("FROM")]),s._v(":指定基础镜像，这里基于nginx镜像")]),s._v(" "),e("li",[e("code",[s._v("RUN")]),s._v(":执行命令")])]),s._v(" "),e("p",[s._v("使用"),e("code",[s._v("docker build")]),s._v("构建镜像：")]),s._v(" "),e("div",{staticClass:"language-sh line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[s._v("docker build -t nginx:local "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("ul",[e("li",[e("code",[s._v("-t")]),s._v(":指定镜像名")]),s._v(" "),e("li",[e("code",[s._v(".")]),s._v(":表示以当前构建打包路径")])]),s._v(" "),e("p",[s._v("查看镜像：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("docker images\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"参考"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[s._v("#")]),s._v(" 参考")]),s._v(" "),e("ol",[e("li",[e("a",{attrs:{href:"https://github.com/jaywcjlove/docker-tutorial",target:"_blank",rel:"noopener noreferrer"}},[s._v("Docker 入门教程"),e("OutboundLink")],1),s._v(" github repo")]),s._v(" "),e("li",[e("a",{attrs:{href:"https://stackoverflow.com/questions/48957195/how-to-fix-docker-got-permission-denied-issue",target:"_blank",rel:"noopener noreferrer"}},[s._v("How to fix docker: Got permission denied issue"),e("OutboundLink")],1),s._v(" stackoverflow")]),s._v(" "),e("li",[e("a",{attrs:{href:"http://www.runoob.com/docker/docker-tutorial.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Docker 教程"),e("OutboundLink")],1),s._v(" 教程")])])])}),[],!1,null,null,null);a.default=t.exports}}]);